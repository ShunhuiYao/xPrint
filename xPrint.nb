Notebook[{

Cell[CellGroupData[{
Cell[TextData[StyleBox["xPrint",
 FontColor->RGBColor[1, 0, 0]]], "Title"],

Cell[TextData[StyleBox["Point-and-Click WYSIWYG tensor input for xAct ",
 FontColor->RGBColor[0, 0, 1]]], "Subtitle"],

Cell[TextData[{
 StyleBox["Alessandro Stecchina",
  FontSize->18],
 "         maderri2@gmail.com\n\n(c) 2009-2015, under GPL\n\n\
http://sites.google.com/site/xprintforxact/\n\
http://metric.iem.csic.es/Martin-Garcia/xAct/\n\
http://groups.google.com/group/xAct"
}], "Subsubtitle"],

Cell[CellGroupData[{

Cell[TextData[StyleBox["1. Begin package",
 FontColor->RGBColor[0, 0, 1]]], "Section",
 FontSize->24],

Cell["1.0. TODO LIST", "Subsection"],

Cell[CellGroupData[{

Cell["1.1. Preliminary definitins", "Subsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"xAct`xPrint`$Version", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<1.3\>\"", ",", 
     RowBox[{"{", 
      RowBox[{"2015", ",", "4", ",", "8"}], "}"}]}], "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"xAct`xPrint`$xPermVersionExpected", "=", 
   RowBox[{"{", 
    RowBox[{"\"\<1.0.3\>\"", ",", 
     RowBox[{"{", 
      RowBox[{"2009", ",", "9", ",", "9"}], "}"}]}], "}"}]}], ";"}]}], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["1.1.1 GPL", "Subsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"xPrint", ":", " ", 
     RowBox[{"Point", "-", "and", "-", 
      RowBox[{
      "Click", " ", "WYSIWYG", " ", "tensor", " ", "input", " ", "for", " ", 
       "xAct"}]}]}], ","}], " ", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Copyright", " ", 
    RowBox[{"(", "C", ")"}], " ", "2010", " ", "Alessandro", " ", 
    "Stecchina"}], " ", "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
     "This", " ", "program", " ", "is", " ", "free", " ", "software"}], ";", 
     " ", 
     RowBox[{"you", " ", "can", " ", "redistribute", " ", "it", " ", 
      RowBox[{"and", "/", "or"}], " ", "modify", "\[IndentingNewLine]", " ", 
      "it", " ", "under", " ", "the", " ", "terms", " ", "of", " ", "the", 
      " ", "GNU", " ", "General", " ", "Public", " ", "License", " ", "as", 
      " ", "published", "\[IndentingNewLine]", " ", "by", " ", "the", " ", 
      "Free", " ", "Software", " ", "Foundation"}], ";", " ", 
     RowBox[{
     "either", " ", "version", " ", "2", " ", "of", " ", "the", " ", 
      "License"}]}], ",", "\[IndentingNewLine]", "  ", 
    RowBox[{"or", " ", 
     RowBox[{"(", 
      RowBox[{"at", " ", "your", " ", "option"}], ")"}], " ", "any", " ", 
     "later", " ", 
     RowBox[{
     "version", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "This"}], 
     " ", "program", " ", "is", " ", "distributed", " ", "in", " ", "the", 
     " ", "hope", " ", "that", " ", "it", " ", "will", " ", "be", " ", 
     "useful"}], ",", "\[IndentingNewLine]", "  ", 
    RowBox[{
     RowBox[{"but", " ", "WITHOUT", " ", "ANY", " ", "WARRANTY"}], ";", " ", 
     RowBox[{
     "without", " ", "even", " ", "the", " ", "implied", " ", "warranty", " ",
       "of", "\[IndentingNewLine]", " ", "MERCHANTABILITY", " ", "or", " ", 
      "FITNESS", " ", "FOR", " ", "A", " ", "PARTICULAR", " ", 
      RowBox[{"PURPOSE", ".", " ", "See"}], " ", "the", " ", "GNU", 
      "\[IndentingNewLine]", " ", "General", " ", "Public", " ", "License", 
      " ", "for", " ", "more", " ", 
      RowBox[{
      "details", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "You"}], 
      " ", "should", " ", "have", " ", "received", " ", "a", " ", "copy", " ",
       "of", " ", "the", " ", "GNU", " ", "General", " ", "Public", " ", 
      "License", "\[IndentingNewLine]", " ", "along", " ", "with", " ", 
      "this", " ", "program"}], ";", " ", 
     RowBox[{"if", " ", "not"}]}], ",", " ", 
    RowBox[{
    "write", " ", "to", " ", "the", " ", "Free", " ", "Software", 
     "\[IndentingNewLine]", " ", "Foundation"}], ",", " ", 
    RowBox[{"Inc", "."}], ",", " ", 
    RowBox[{
     RowBox[{"59", " ", "Temple", " ", "Place"}], "-", 
     RowBox[{"Suite", " ", "330"}]}], ",", " ", "Boston", ",", " ", 
    RowBox[{
     RowBox[{"MA", " ", "02111"}], "-", "1307"}], ",", "\[IndentingNewLine]", 
    "  ", 
    RowBox[{"USA", "."}]}], " ", "\[IndentingNewLine]", "*)"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["1.2. History and Info", "Subsection"],

Cell["\<\
(* :Title: xPrint *) 

(* :Author: Alessandro Stecchina *)

(* :Summary: Point-and-Click WYSIWYG tensor input for xAct *)

(* :Brief Discussion:
 State-of-the-art palette interface to the xAct suite of Mathematica packages
 Select manifolds, tensors, indices and derivative operators via pull-down \
menus
 Real-time wysiwyg tensor object construction
 VBundle-constrained menu-driven index selection
 Abstract and b and c indices
 On-the-fly syntax checking
 One-click pasting of formatted tensor objects into notebooks
*)
  
(* :Context: xAct`xPrint` *)

(* :Copyright: Alessandro Stecchina (2010-2015) *)

(* :History:
Vers. 1.3
\t8 Apr 2015
\tHelp menu with access to tutorials
\txPrint is now in a single folder with documentation files
\txTerior is loaded automatically with xPrint
\talgebraic operations buttons added
\tExterior forms section added
\tGdelta Menu supprts symbolic dimension
\tGdelta bug fixed
\tUpgraded to xAct 1.1.0 and Mathematica 10.x
Vers. 1.1
\t19 Aug 2010
\tLabel indices
\tBasis menu now with bases names and colored dots now made with FilledCircle
\tPrimed and double primed indices using Primed and DoublePrimed options
Vers. 1.01
\t18 Jul 2010
\tReduced overall font size
\tManifold menu moved on top
Vers. 1.0
\t20 Jun 2010
\tWYSIWYG input of derivatives
\tSolved SlotOftensor problem
\tTarget nb and Lock
\tTensor manipulation section started
\t\"About xPrint\" help menu item
\tSplashscreen
Vers. 0.997
\tPredefined tensor slots are enforced when a metric is not present
\tApplied dividers to the main sections
Vers. 0.996
\tHelp menu added, linking to xAct documentation
\tDefinition section added using enhanced template technology
\tGlobal Environment section added
Vers. 0.995
\tNo-manifold-red-box problem fixed
\tPasteButton appearance changed to Button
\tAdded:Basis in the Tensor menu
\tBetter handling of indices of Basis and delta 
\tPatch to interpretbox of xTensor to fix the blue-index problem.
Vers. 0.99
\tb and c index support
\tparameter menu
\tOpenerViews
\tGeneral Settings section
\tBases and Charts section
Vers. 0.62
\tMain menus have been tooltipped
Vers. 0.60
\tFirst public release 17 Mar 2010
\tDerivatives menu
Vers. 0.50
\tJan 2010
\tJan 29 xPrint name proposed
\tManifold and Tensor menus
\tCreated out of interstellar dust

*)

(* :Keywords: *)

(* :Source: xPrint.nb *)

(* :Warning: *)

(* :Mathematica Version: 7.0 and later *)

(* :Limitations: can't prepare Tiramisu...yet *)\
\>", "Input",
 PageWidth->PaperWidth,
 CellMargins->{{60, -272}, {Inherited, Inherited}},
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["1.3. BeginPackage", "Subsection"],

Cell["Last package read in a session:", "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"Unevaluated", "[", "xAct`xCore`Private`$LastPackage", "]"}], "===",
      "xAct`xCore`Private`$LastPackage"}], ",", 
    RowBox[{
    "xAct`xCore`Private`$LastPackage", "=", "\"\<xAct`xPrint`\>\""}]}], "]"}],
   ";"}]], "Input",
 InitializationCell->True],

Cell[CellGroupData[{

Cell[BoxData["xAct`xCore`Private`$LastPackage"], "Input"],

Cell[BoxData["\<\"xAct`xPrint`\"\>"], "Output"]
}, Open  ]],

Cell["xPrint will load xCoba and xTerior too", "Text"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", 
  RowBox[{"\"\<xAct`xPrint`\>\"", ",", 
   RowBox[{"{", 
    RowBox[{
    "\"\<xAct`xCore`\>\"", ",", "\"\<xAct`xPerm`\>\"", ",", 
     "\"\<xAct`xTensor`\>\"", ",", "\"\<xAct`xCoba`\>\"", ",", 
     "\"\<xAct`xTerior`\>\""}], "}"}]}], "]"}]], "Input",
 InitializationCell->True],

Cell[TextData[{
 "Check version of ",
 StyleBox["xPerm",
  FontSlant->"Italic"],
 ". We simply compare dates: (ADD SEVERAL CHECKS FOR THE OTHER PACKAGES IF \
YOU WANT. YOU CAN ALSO CHECK THE VERSION OF THE LAST ONE LOADED (xCoba), \
BECAUSE THAT WILL CHECK THE VERSIONS OF THE REST)"
}], "Text"],

Cell[BoxData[
 RowBox[{"If", "[", 
  RowBox[{
   RowBox[{"Not", "@", 
    RowBox[{"OrderedQ", "@", 
     RowBox[{"Map", "[", 
      RowBox[{"Last", ",", 
       RowBox[{"{", 
        RowBox[{"$xPermVersionExpected", ",", "xAct`xPerm`$Version"}], 
        "}"}]}], "]"}]}]}], ",", 
   RowBox[{"Throw", "@", 
    RowBox[{"Message", "[", 
     RowBox[{
      RowBox[{"General", "::", "versions"}], ",", "\"\<xPerm\>\"", ",", 
      "xAct`xPerm`$Version", ",", "$xPermVersionExpected"}], "]"}]}]}], 
  "]"}]], "Input",
 InitializationCell->True],

Cell["Message:", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{"\"\<Package xAct`xPrint`  version \>\"", ",", 
    RowBox[{"$Version", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<, \>\"", ",", 
    RowBox[{"$Version", "[", 
     RowBox[{"[", "2", "]"}], "]"}]}], "]"}], ";"}], "\n", 
 RowBox[{"Print", "[", 
  "\"\<Copyright (C) 2010-2015, Alessandro Stecchina, under the General \
Public License.\>\"", "]"}]}], "Input",
 InitializationCell->True],

Cell["\<\
We specify the context xAct`xPrint` to avoid overriding the Disclaimer of the \
other packages. However we need to turn off the message General:shdw \
temporarily:\
\>", "Text"],

Cell[BoxData[{
 RowBox[{"Off", "[", 
  RowBox[{"General", "::", "shdw"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xAct`xPrint`Disclaimer", "[", "]"}], ":=", 
  RowBox[{
  "Print", "[", 
   "\"\<These are points 11 and 12 of the General Public \
License:\\n\\nBECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO \
WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT \
WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES \
PROVIDE THE PROGRAM `AS IS\.b4 WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED \
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF \
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO \
THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM \
PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR \
CORRECTION.\\n\\nIN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO \
IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY \
AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR \
DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES \
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT \
LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED \
BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER \
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE \
POSSIBILITY OF SUCH DAMAGES.\>\"", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"On", "[", 
  RowBox[{"General", "::", "shdw"}], "]"}]}], "Input",
 InitializationCell->True],

Cell[TextData[{
 "If ",
 StyleBox["xPrint",
  FontSlant->"Italic"],
 " is the last package begin read, print the GPL message:"
}], "Text"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"If", "[", 
  RowBox[{
   RowBox[{"xAct`xCore`Private`$LastPackage", "===", "\"\<xAct`xPrint`\>\""}],
    ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Unset", "[", "xAct`xCore`Private`$LastPackage", "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
    "Print", "[", 
     "\"\<These packages come with ABSOLUTELY NO WARRANTY; for details type \
Disclaimer[]. This is free software, and you are welcome to redistribute it \
under certain conditions. See the General Public License for details.\>\"", 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Print", "[", "xAct`xCore`Private`bars", "]"}]}]}], 
  "]"}]], "Input",
 InitializationCell->True],

Cell[CellGroupData[{

Cell[BoxData["\<\"------------------------------------------------------------\
\"\>"], "Print"],

Cell[BoxData["\<\"These packages come with ABSOLUTELY NO WARRANTY; for \
details type Disclaimer[]. This is free software, and you are welcome to \
redistribute it under certain conditions. See the General Public License for \
details.\"\>"], "Print"],

Cell[BoxData["\<\"------------------------------------------------------------\
\"\>"], "Print"]
}, Open  ]]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["1.4. Usage of public functions", "Subsection"],

Cell["Public functions :", "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"xPrintPalette", "::", "usage"}], " ", "=", " ", 
     "\"\<xPrintPalette creates a session palette for pasting tensor input.\>\
\""}], ";"}], " ", "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"xPrintValidQ", "::", "usage"}], " ", "=", " ", 
     "\"\<xPrintValidQ[expr] returns True if expr is syntactically correct \
and False otherwise.\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"DefPrimedBasis", "::", "usage"}], " ", "=", " ", 
      "\"\<DefPrimedBasis[basis,vbundle,{c1,...,cn}] defines a basis with \
primed indices. It passes all its arguments to DefBasis\>\""}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"DefDoublePrimedBasis", "::", "usage"}], " ", "=", " ", 
      "\"\<DefDoublePrimedBasis[basis,vbundle,{c1,...,cn}] defines a basis \
with double-primed indices. It passes all its arguments to DefBasis\>\""}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"DefPrimedChart", "::", "usage"}], " ", "=", " ", 
      "\"\<DefPrimedChart[basis,vbundle,{c1,...,cn}] defines a chart with \
primed indices. It passes all its arguments to DefChart\>\""}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"DefDoublePrimedChart", "::", "usage"}], " ", "=", " ", 
      "\"\<DefDoublePrimedChart[basis,vbundle,{c1,...,cn}] defines a chart \
with double-primed indices. It passes all its arguments to DefChart\>\""}], 
     ";"}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"xPrintpaste", "::", "usage"}], " ", "=", " ", 
      "\"\<paste the palette\>\""}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"xPrintPalette", "::", "usage"}], " ", "=", " ", 
      "\"\<palette object\>\""}], ";"}], "\[IndentingNewLine]", 
    "*)"}]}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["1.4.5 xTensor blue index problem fix", "Subsection"],

Cell["\<\
This is necessary to fix the blue index problem.
With the newer versdion of xTensor this patch to the xTensor code will be no \
longer necessary.\
\>", "Text"],

Cell["No longer necessary since xTensor version 1.0", "Text"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"xAct`xTensor`Private`interpretbox", "[", 
    RowBox[{"expr_", ",", "box_"}], "]"}], ":=", "\n", "    ", 
   RowBox[{"InterpretationBox", "[", 
    RowBox[{
     RowBox[{"StyleBox", "[", 
      RowBox[{"box", ",", 
       RowBox[{"AutoSpacing", "\[Rule]", "False"}], ",", 
       RowBox[{"ShowAutoStyles", "\[Rule]", "False"}]}], "]"}], ",", "expr", 
     ",", "\n", "      ", 
     RowBox[{"Editable", "\[Rule]", "False"}]}], "]"}]}], ";"}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["1.4.6 Primed indices (patch to xCoba)", "Subsection"],

Cell["This patch to the xCoba code", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"xAct`xCoba`Primed", "::", "usage"}], "=", 
   "\"\<Primed is an option of DefBasis and DefChart. If True, basis or chart \
indices are printed with a prime. Default is False\>\""}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"xAct`xCoba`DoublePrimed", "::", "usage"}], "=", 
   "\"\<DoublePrimed is an option of DefBasis and DefChart. If True, basis or \
chart indices are printed with a double-prime. Default is False\>\""}], 
  ";"}]}], "Input",
 InitializationCell->True],

Cell[CellGroupData[{

Cell["Modifying DefBasis", "Subsubsection"],

Cell["Updated to xCoba 0.8.2", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Unprotect", "[", "DefBasis", "]"}], ";"}], "\[IndentingNewLine]", 
  
  RowBox[{"(*", 
   RowBox[{"added", " ", "Primed", " ", "and", " ", "DoublePrimed"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Options", "[", "DefBasis", "]"}], "=", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"BasisColor", "\[Rule]", 
       RowBox[{"RGBColor", "[", 
        RowBox[{"1", ",", "0", ",", "0"}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"FormatBasis", "\[Rule]", "Automatic"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"ProtectNewSymbol", "\[RuleDelayed]", "$ProtectNewSymbols"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{"Dagger", "\[Rule]", "Real"}], ",", "\[IndentingNewLine]", 
      RowBox[{"ExtendedFrom", "\[Rule]", "Null"}], ",", "\[IndentingNewLine]", 
      RowBox[{"MetricInBasis", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"BasisChange", "\[Rule]", "Null"}], ",", "\[IndentingNewLine]", 
      
      RowBox[{"epsilonOrientationOfMetric", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"Null", ",", "1"}], "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"DependenciesOfBasis", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"DefInfo", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\"\<basis\>\"", ",", "\"\<\>\""}], "}"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Master", "\[Rule]", "Null"}], ",", "\[IndentingNewLine]", 
      RowBox[{"Primed", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
      RowBox[{"DoublePrimed", "\[Rule]", "False"}]}], "\[IndentingNewLine]", 
     "}"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"DefBasis", "[", 
     RowBox[{
     "basisname_", ",", "vbundle_Symbol", ",", "cnumbers_", ",", 
      "options___"}], "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{
      "added", " ", "pr", " ", "and", " ", "dpr", " ", "to", " ", "local", 
       " ", "variables", " ", "and", " ", "to", " ", "the", " ", "list", " ", 
       "of", " ", "options"}], ",", " ", 
      RowBox[{
      "together", " ", "with", " ", "Primed", " ", "and", " ", 
       "DoublePrimed"}]}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "bc", ",", "pns", ",", "dag", ",", "ef", ",", "mb", ",", "mb3", ",", 
        "dim", ",", "tanb", ",", "covdef", ",", "info", ",", "master", ",", 
        "pr", ",", "dpr", ",", 
        RowBox[{"manifold", "=", 
         RowBox[{"BaseOfVBundle", "[", "vbundle", "]"}]}], ",", "tbundle"}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "bc", ",", "pns", ",", "dag", ",", "ef", ",", "mb", ",", "deps", ",",
           "info", ",", "master", ",", "pr", ",", "dpr"}], "}"}], "=", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
           "BasisColor", ",", "ProtectNewSymbol", ",", "Dagger", ",", 
            "ExtendedFrom", ",", "MetricInBasis", ",", "DependenciesOfBasis", 
            ",", "DefInfo", ",", "Master", ",", "Primed", ",", 
            "DoublePrimed"}], "}"}], "/.", 
          RowBox[{"CheckOptions", "[", "options", "]"}]}], "/.", 
         RowBox[{"Options", "[", "DefBasis", "]"}]}]}], ";"}]}], 
     "\[IndentingNewLine]"}]}], "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"DefBasis", "[", 
    RowBox[{"basisname_", ",", "vbundle_", ",", "cnumbers_", ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{
     "added", " ", "pr", " ", "and", " ", "dpr", " ", "to", " ", "local", " ",
       "variables", " ", "and", " ", "to", " ", "the", " ", "list", " ", "of",
       " ", "options"}], ",", " ", 
     RowBox[{
     "together", " ", "with", " ", "Primed", " ", "and", " ", 
      "DoublePrimed"}]}], "*)"}], 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "bc", ",", "fb", ",", "pns", ",", "dag", ",", "ef", ",", "mb", ",", 
       "change", ",", "eoom", ",", "deps", ",", "mb3", ",", "dim", ",", 
       "tanb", ",", "covdef", ",", "info", ",", "master", ",", "pr", ",", 
       "dpr", ",", 
       RowBox[{"manifold", "=", 
        RowBox[{"BaseOfVBundle", "[", "vbundle", "]"}]}], ",", "tbundle"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "bc", ",", "fb", ",", "pns", ",", "dag", ",", "ef", ",", "mb", ",", 
         "change", ",", "eoom", ",", "deps", ",", "info", ",", "master", ",", 
         "pr", ",", "dpr"}], "}"}], "=", 
       RowBox[{"OptionValue", "[", 
        RowBox[{"{", 
         RowBox[{
         "BasisColor", ",", "FormatBasis", ",", "ProtectNewSymbol", ",", 
          "Dagger", ",", "ExtendedFrom", ",", "MetricInBasis", ",", 
          "BasisChange", ",", "epsilonOrientationOfMetric", ",", 
          "DependenciesOfBasis", ",", "DefInfo", ",", "Master", ",", "Primed",
           ",", "DoublePrimed"}], "}"}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"**", 
        RowBox[{"*", " ", "Checks"}]}], " ", "****)"}], "\n", "       ", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "names"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"VBundleQ", "[", "vbundle", "]"}]}], ",", 
        RowBox[{"Throw", "@", 
         RowBox[{"Message", "[", 
          RowBox[{
           RowBox[{"DefBasis", "::", "unknown"}], ",", "\"\<vbundle\>\"", ",",
            "vbundle"}], "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"dim", "=", 
       RowBox[{"DimOfVBundle", "[", "vbundle", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"ChartQ", "[", "basisname", "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"BasisQ", "[", "basisname", "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{"The", " ", "basis", " ", "already", " ", 
            RowBox[{"exists", ".", " ", "This"}], " ", "is", " ", "a", " ", 
            "duplicated", " ", "name"}], " ", "*)"}], "\[IndentingNewLine]", 
          RowBox[{"Throw", "@", 
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"ValidateSymbol", "::", "used"}], ",", "basisname", ",", 
             "\"\<as a basis\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"(*", " ", 
           RowBox[{"Coordinate", " ", "basis", " ", "being", " ", 
            RowBox[{"defined", ".", " ", "Symbol"}], " ", "validation", " ", 
            "already", " ", 
            RowBox[{"performed", ".", " ", "Do"}], " ", "nothing"}], " ", 
           "*)"}], "\[IndentingNewLine]", "Null"}], "\[IndentingNewLine]", 
         "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"Noncoordinate", " ", 
          RowBox[{"basis", ".", " ", "Perform"}], " ", "symbol", " ", 
          "validation"}], " ", "*)"}], "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"ValidateSymbol", "[", "basisname", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"ValidateSymbolInSession", "[", "basisname", "]"}]}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{"Check", " ", 
         RowBox[{"cnumbers", ":", " ", "heads"}]}], ",", " ", 
        RowBox[{"length", " ", "and", " ", "integer", " ", 
         RowBox[{"type", ".", " ", "Repeated"}], " ", "cnumbers", " ", "are", 
         " ", "not", " ", "allowed"}]}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"Or", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"Head", "[", "cnumbers", "]"}], "=!=", "List"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Union", "[", "cnumbers", "]"}], "=!=", 
           RowBox[{"Sort", "[", "cnumbers", "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"Not", "[", 
           RowBox[{"And", "@@", 
            RowBox[{"(", 
             RowBox[{"IntegerQ", "/@", "cnumbers"}], ")"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Length", "[", "cnumbers", "]"}], "=!=", "dim"}]}], "]"}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"Throw", "@", 
         RowBox[{"Message", "[", 
          RowBox[{
           RowBox[{"DefBasis", "::", "invalid"}], ",", "cnumbers", ",", 
           "\"\<list of cnumbers\>\""}], "]"}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "complex", " ", "option"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FreeQ", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"Real", ",", "Complex", ",", "Conjugate"}], "}"}], ",", 
          "dag"}], "]"}], ",", 
        RowBox[{"Throw", "@", 
         RowBox[{"Message", "[", 
          RowBox[{
           RowBox[{"DefBasis", "::", "invalid"}], ",", "dag", ",", 
           "\"\<value for option Dagger\>\""}], "]"}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"DaggerQ", "[", "vbundle", "]"}], "&&", 
         RowBox[{"dag", "===", "Real"}]}], ",", 
        RowBox[{"Throw", "@", 
         RowBox[{"Message", "[", 
          RowBox[{
           RowBox[{"DefBasis", "::", "error"}], ",", 
           "\"\<Cannot define a real basis on a complex manifold.\>\""}], 
          "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "dependencies"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"Not", "@", 
           RowBox[{"Or", "[", 
            RowBox[{
             RowBox[{"ManifoldQ", "[", "#", "]"}], ",", 
             RowBox[{"ParameterQ", "[", "#", "]"}]}], "]"}]}], ",", 
          RowBox[{"Throw", "@", 
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"DefBasis", "::", "invalid"}], ",", "#", ",", 
             "\"\<dependency\>\""}], "]"}]}]}], "]"}], "&"}], "/@", "deps"}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FreeQ", "[", 
         RowBox[{"deps", ",", "manifold"}], "]"}], ",", 
        RowBox[{"deps", "=", 
         RowBox[{"Prepend", "[", 
          RowBox[{"deps", ",", "manifold"}], "]"}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "Check", " ", "extension", " ", "from", " ", "other", " ", "basis"}], 
       " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"covdef", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"ef", "=!=", "Null"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"BasisQ", "[", "ef", "]"}]}], ",", 
            RowBox[{"Throw", "@", 
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"DefBasis", "::", "unknown"}], ",", "\"\<basis\>\"", 
               ",", "ef"}], "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"tanb", "=", 
           RowBox[{"VBundleOfBasis", "[", "ef", "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"TangentBundleOfManifold", "@", 
              RowBox[{"BaseOfVBundle", "@", "tanb"}]}], "=!=", "tanb"}], ",", 
            
            RowBox[{"Throw", "@", 
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"DefBasis", "::", "invalid"}], ",", "ef", ",", 
               "\"\<basis to extend\>\""}], "]"}]}]}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"BaseOfVBundle", "@", "tanb"}], "=!=", "manifold"}], ",", 
            RowBox[{"Throw", "@", 
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"DefBasis", "::", "invalid"}], ",", "ef", ",", 
               "\"\<basis to extend\>\""}], "]"}]}]}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"PDOfBasis", "[", "ef", "]"}]}], ",", "\[IndentingNewLine]",
          "Null"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "mb"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"mb", "=!=", 
         RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"MatchQ", "[", 
           RowBox[{"mb", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"_", "?", "MetricQ"}], ",", 
              RowBox[{"basisname", "|", 
               RowBox[{"-", "basisname"}]}], ",", "_"}], "}"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"Switch", "[", 
           RowBox[{
            RowBox[{"mb3", "=", 
             RowBox[{"mb", "[", 
              RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
            RowBox[{"\"\<Orthogonal\>\"", "|", "\"\<Orthonormal\>\""}], ",", 
            "Null", ",", "\[IndentingNewLine]", "_List", ",", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{
                RowBox[{"Dimensions", "[", "mb3", "]"}], "=!=", 
                RowBox[{"{", "dim", "}"}]}], "&&", 
               RowBox[{
                RowBox[{"Dimensions", "[", "mb3", "]"}], "=!=", 
                RowBox[{"{", 
                 RowBox[{"dim", ",", "dim"}], "}"}]}]}], ",", 
              RowBox[{"Throw", "@", 
               RowBox[{"Message", "[", 
                RowBox[{
                 RowBox[{"DefBasis", "::", "invalid"}], ",", "mb3", ",", 
                 "\"\<array of metric values\>\""}], "]"}]}]}], "]"}], ",", 
            "\[IndentingNewLine]", "_", ",", 
            RowBox[{"Throw", "@", 
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"DefBasis", "::", "invalid"}], ",", "mb3", ",", 
               "\"\<metric values specification\>\""}], "]"}]}]}], 
           "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Throw", "@", 
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"DefBasis", "::", "invalid"}], ",", "mb", ",", 
             "\"\<value for option MetricInBasis\>\""}], "]"}]}]}], 
         "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "change"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"change", "=!=", "Null"}], ",", "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"!", 
           RowBox[{"MatchQ", "[", 
            RowBox[{"change", ",", 
             RowBox[{"HoldPattern", "[", 
              RowBox[{"CTensor", "[", 
               RowBox[{
                RowBox[{"_", "?", "MatrixQ"}], ",", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"-", "basisname"}], ",", 
                  RowBox[{"_", "?", "BasisQ"}]}], "}"}], ",", "0"}], "]"}], 
              "]"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"Throw", "@", 
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"DefBasis", "::", "invalid"}], ",", "change", ",", 
             "\"\<basis change specification\>\""}], "]"}]}]}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Check", " ", "eoom"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Head", "[", "eoom", "]"}], "=!=", "List"}], "||", 
         RowBox[{
          RowBox[{"Length", "[", "eoom", "]"}], "=!=", "2"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Throw", "@", 
          RowBox[{"Message", "[", 
           RowBox[{
            RowBox[{"DefBasis", "::", "invalid"}], ",", "eoom", ",", 
            "\"\<value for option epsilonOrientationOfMetric\>\""}], "]"}]}], 
         ";"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"eoom", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "=!=", "Null"}], "&&", 
         RowBox[{"!", 
          RowBox[{"MetricQ", "[", 
           RowBox[{"eoom", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "]"}]}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"Throw", "@", 
          RowBox[{"Message", "[", 
           RowBox[{
            RowBox[{"DefBasis", "::", "unknown"}], ",", "\"\<metric\>\"", ",", 
            RowBox[{"eoom", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"**", 
        RowBox[{"*", " ", "Define", " ", "basis"}]}], " ", "****)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"xAct`xTensor`Private`MakeDefInfo", "[", 
       RowBox[{"DefBasis", ",", "basisname", ",", "info"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"MakexTensions", "[", 
       RowBox[{
       "DefBasis", ",", "\"\<Beginning\>\"", ",", "basisname", ",", "vbundle",
         ",", "cnumbers", ",", "options"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", "Register", " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"$Bases", ",", "basisname"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"BasisQ", "[", "basisname", "]"}], "^=", "True"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"BasisColor", "[", "basisname", "]"}], "^=", "bc"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"VBundleOfBasis", "[", "basisname", "]"}], "^=", "vbundle"}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"basisname", "/:", 
       RowBox[{"CNumbersOf", "[", 
        RowBox[{"basisname", ",", "vbundle"}], "]"}], "=", 
       RowBox[{"Sort", "@", "cnumbers"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"etaOrientation", "[", "basisname", "]"}], "^=", 
       RowBox[{"Signature", "[", "cnumbers", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"eoom", "[", 
          RowBox[{"[", "1", "]"}], "]"}], "=!=", "Null"}], ",", 
        RowBox[{"basisname", "/:", 
         RowBox[{"epsilonOrientation", "[", 
          RowBox[{
           RowBox[{"eoom", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", "basisname"}], "]"}], "=", 
         RowBox[{"eoom", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"DependenciesOfBasis", "[", "basisname", "]"}], "^=", "deps"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"DefInfo", "[", "basisname", "]"}], "^=", "info"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"xAct`xTensor`Private`SymbolRelations", "[", 
       RowBox[{"basisname", ",", "master", ",", 
        RowBox[{"{", "vbundle", "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{
        "Define", " ", "associated", " ", "parallel", " ", "derivative"}], 
        ",", " ", 
        RowBox[{"always", " ", "real"}]}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"tbundle", "=", 
       RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"With", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"indtng", "=", 
           RowBox[{"First", "@", 
            RowBox[{"GetIndicesOfVBundle", "[", 
             RowBox[{"tbundle", ",", "1"}], "]"}]}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"pdbasis", "=", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"HasDaggerCharacterQ", "[", "basisname", "]"}], ",", 
             RowBox[{"PDOfBasis", "[", 
              RowBox[{"Dagger", "[", "basisname", "]"}], "]"}], ",", 
             RowBox[{"GiveSymbol", "[", 
              RowBox[{"PD", ",", "basisname"}], "]"}]}], "]"}]}]}], "}"}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"PDOfBasis", "[", "basisname", "]"}], "^=", "pdbasis"}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"dag", "=!=", "Conjugate"}], ",", "\[IndentingNewLine]", 
           RowBox[{"(*", " ", 
            RowBox[{"Quiet", " ", 
             RowBox[{"OptionValue", "::", "nodef"}], " ", "because", " ", 
             "we", " ", "are", " ", "passing", " ", 
             RowBox[{"DefBasis", "/", "DefChart"}], " ", "options"}], " ", 
            "*)"}], "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Quiet", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"DefCovD", "[", 
               RowBox[{
                RowBox[{"pdbasis", "[", 
                 RowBox[{"-", "indtng"}], "]"}], ",", "vbundle", ",", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"ColorString", "[", 
                   RowBox[{"$PDPostfixSymbol", ",", "bc"}], "]"}], ",", 
                  RowBox[{"ColorString", "[", 
                   RowBox[{"$PDPrefixSymbol", ",", "bc"}], "]"}]}], "}"}], 
                ",", 
                RowBox[{"Torsion", "\[RuleDelayed]", 
                 RowBox[{"Not", "@", 
                  RowBox[{"ChartQ", "[", "basisname", "]"}]}]}], ",", 
                RowBox[{"Curvature", "\[Rule]", "False"}], ",", 
                RowBox[{"Master", "\[Rule]", "basisname"}], ",", 
                RowBox[{"ExtendedFrom", "\[Rule]", "covdef"}], ",", 
                RowBox[{"DefInfo", "\[Rule]", 
                 RowBox[{"If", "[", 
                  RowBox[{
                   RowBox[{"info", "===", "False"}], ",", "False", ",", 
                   RowBox[{"{", 
                    RowBox[{"\"\<parallel derivative\>\"", ",", "\"\<\>\""}], 
                    "}"}]}], "]"}]}], ",", "options"}], "]"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"OptionValue", "::", "nodef"}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"Not", "@", 
               RowBox[{"ChartQ", "[", "basisname", "]"}]}], ",", 
              RowBox[{"With", "[", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"torsion", "=", 
                  RowBox[{"Torsion", "[", "basisname", "]"}]}], "}"}], ",", 
                RowBox[{"xAct`xTensor`Private`SetPrintAs", "[", 
                 RowBox[{"torsion", ",", 
                  RowBox[{"ColorString", "[", 
                   RowBox[{"\"\<T\>\"", ",", "bc"}], "]"}]}], "]"}]}], 
               "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"BasisOfCovD", "[", "pdbasis", "]"}], "^=", 
             "basisname"}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"dag", "===", "Complex"}], ",", 
              RowBox[{"Set", "[", 
               RowBox[{
                RowBox[{"Evaluate", "[", 
                 RowBox[{"MakeDaggerSymbol", "[", "pdbasis", "]"}], "]"}], 
                ",", "pdbasis"}], "]"}]}], "]"}]}]}], " ", 
          "\[IndentingNewLine]", "]"}]}]}], " ", "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Store", " ", "positions", " ", "of", " ", "cnumbers"}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"MapIndexed", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Set", "[", 
          RowBox[{
           RowBox[{"PNumber", "[", 
            RowBox[{"#1", ",", "basisname"}], "]"}], ",", 
           RowBox[{"First", "[", "#2", "]"}]}], "]"}], "&"}], ",", 
        RowBox[{"CNumbersOf", "[", 
         RowBox[{"basisname", ",", "vbundle"}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"MapIndexed", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Set", "[", 
          RowBox[{
           RowBox[{"PNumber", "[", 
            RowBox[{"#1", ",", 
             RowBox[{"-", "basisname"}]}], "]"}], ",", 
           RowBox[{"First", "[", "#2", "]"}]}], "]"}], "&"}], ",", 
        RowBox[{"CNumbersOf", "[", 
         RowBox[{"basisname", ",", "vbundle"}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "Properties", " ", "of", " ", "basis", " ", "under", " ", "complex", 
        " ", "conjugation"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"Switch", "[", 
       RowBox[{"dag", ",", "\[IndentingNewLine]", "Real", ",", 
        RowBox[{
         RowBox[{"Dagger", "[", "basisname", "]"}], "^=", "basisname"}], ",", 
        "\[IndentingNewLine]", "Conjugate", ",", "Null", ",", 
        "\[IndentingNewLine]", "Complex", ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"xAct`xTensor`Private`SetDaggerPair", "[", 
          RowBox[{"basisname", ",", 
           RowBox[{"MakeDaggerSymbol", "[", "basisname", "]"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"DefBasis", "[", 
          RowBox[{
           RowBox[{"Dagger", "[", "basisname", "]"}], ",", 
           RowBox[{"Dagger", "[", "vbundle", "]"}], ",", "cnumbers", ",", 
           RowBox[{"Dagger", "\[Rule]", "Conjugate"}], ",", 
           RowBox[{"Master", "\[Rule]", "basisname"}], ",", "options"}], 
          "]"}]}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Register", " ", "change", " ", "of", " ", "basis"}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"change", "=!=", "Null"}], ",", 
        RowBox[{"SetBasisChange", "[", "change", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "Store", " ", "values", " ", "of", " ", "components", " ", "of", " ", 
        "some", " ", "metric", " ", "in", " ", "this", " ", "basis"}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"mb", "=!=", 
         RowBox[{"{", "}"}]}], ",", 
        RowBox[{"Apply", "[", 
         RowBox[{"MetricInBasis", ",", "mb"}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{"Define", " ", "associated", " ", "eta", " ", "tensors"}], 
        ",", " ", 
        RowBox[{"even", " ", "for", " ", "inner", " ", "vbundles"}]}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"defeta", "[", 
       RowBox[{"basisname", ",", "dag", ",", "info"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"Format", " ", "bases", " ", "elements"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"fb", "=!=", "Automatic"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"!", 
            RowBox[{"MatchQ", "[", 
             RowBox[{"fb", ",", 
              RowBox[{"{", 
               RowBox[{"_List", ",", "_List"}], "}"}]}], "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefBasis", "::", "invalid"}], ",", "fb", ",", 
              "\"\<value for option FormatBasis\>\""}], "]"}]}]}], "]"}], ";",
          "\[IndentingNewLine]", 
         RowBox[{"FormatUpVectors", "[", 
          RowBox[{
           RowBox[{"fb", "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"CIndicesOf", "[", 
            RowBox[{"-", "basisname"}], "]"}], ",", "scalars"}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"FormatDownVectors", "[", 
          RowBox[{
           RowBox[{"fb", "[", 
            RowBox[{"[", "2", "]"}], "]"}], ",", 
           RowBox[{"CIndicesOf", "[", "basisname", "]"}], ",", "scalars"}], 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"MakexTensions", "[", 
       RowBox[{
       "DefBasis", ",", "\"\<End\>\"", ",", "basisname", ",", "vbundle", ",", 
        "cnumbers", ",", "options"}], "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{"pns", ",", 
        RowBox[{"Protect", "[", "basisname", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "added", " ", "the", " ", "next", " ", "lines", " ", "to", " ", 
        "launch", " ", "my", " ", "internal", " ", "functions"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{"pr", ",", 
        RowBox[{
        "xAct`xPrint`Private`PrimedIndexForm", "[", "basisname", "]"}]}], 
       "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{"dpr", ",", 
        RowBox[{
        "xAct`xPrint`Private`DoublePrimedIndexForm", "[", "basisname", 
         "]"}]}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"SetNumberOfArguments", "[", 
   RowBox[{"DefBasis", ",", 
    RowBox[{"{", 
     RowBox[{"3", ",", "Infinity"}], "}"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Protect", "[", "DefBasis", "]"}], ";"}]}], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Modifying DefChart", "Subsubsection"],

Cell["Updated to xCoba 0.8.2", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Unprotect", "[", "DefChart", "]"}], ";"}], "\n", 
  RowBox[{"(*", 
   RowBox[{"added", " ", "Primed", " ", "and", " ", "DoublePrimed"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"Options", "[", "DefChart", "]"}], "=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"ChartColor", "\[Rule]", 
        RowBox[{"RGBColor", "[", 
         RowBox[{"1", ",", "0", ",", "0"}], "]"}]}], ",", 
       RowBox[{"ProtectNewSymbol", "\[RuleDelayed]", "$ProtectNewSymbols"}], 
       ",", 
       RowBox[{"Dagger", "\[Rule]", "Real"}], ",", 
       RowBox[{"MetricInBasis", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"Primed", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
       RowBox[{"DoublePrimed", "\[Rule]", "False"}]}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Options", "[", "DefChart", "]"}], "=", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"ChartColor", "\[Rule]", 
       RowBox[{"RGBColor", "[", 
        RowBox[{"1", ",", "0", ",", "0"}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"FormatBasis", "\[Rule]", "Automatic"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"ProtectNewSymbol", "\[RuleDelayed]", "$ProtectNewSymbols"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{"Dagger", "\[Rule]", "Real"}], ",", "\[IndentingNewLine]", 
      RowBox[{"MetricInBasis", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"epsilonOrientationOfMetric", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"Null", ",", "1"}], "}"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"ExtendedCoordinateDerivatives", "\[Rule]", "True"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"DefInfo", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\"\<chart\>\"", ",", "\"\<\>\""}], "}"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Primed", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
      RowBox[{"DoublePrimed", "\[Rule]", "False"}]}], "\[IndentingNewLine]", 
     "}"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"DefChart", "[", 
    RowBox[{
    "chartname_", ",", "manifold_", ",", "cnumbers_", ",", "scalars_List", 
     ",", 
     RowBox[{"options", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"pd", "=", 
        RowBox[{"GiveSymbol", "[", 
         RowBox[{"PD", ",", "chartname"}], "]"}]}], ",", 
       RowBox[{"heads", "=", 
        RowBox[{"Head", "/@", "scalars"}]}], ",", 
       RowBox[{"index", "=", 
        RowBox[{
         RowBox[{"IndicesOfVBundle", "[", 
          RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}], "]"}], 
         "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{
       "added", " ", "pr", " ", "and", " ", "dpr", " ", "to", " ", "local", 
        " ", "variables", " ", "and", " ", "to", " ", "the", " ", "list", " ",
         "of", " ", "options"}], ",", " ", 
       RowBox[{
       "together", " ", "with", " ", "Primed", " ", "and", " ", 
        "DoublePrimed"}]}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Module", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "cc", ",", "fb", ",", "pns", ",", "dag", ",", "eoom", ",", "ecd", 
          ",", "info", ",", "prot", ",", "dheads", ",", "pheads", ",", "pr", 
          ",", "dpr"}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
           "cc", ",", "fb", ",", "pns", ",", "dag", ",", "eoom", ",", "ecd", 
            ",", "info", ",", "pr", ",", "dpr"}], "}"}], "=", 
          RowBox[{"OptionValue", "[", 
           RowBox[{"{", 
            RowBox[{
            "ChartColor", ",", "FormatBasis", ",", "ProtectNewSymbol", ",", 
             "Dagger", ",", "epsilonOrientationOfMetric", ",", 
             "ExtendedCoordinateDerivatives", ",", "DefInfo", ",", "Primed", 
             ",", "DoublePrimed"}], "}"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{"dheads", "=", 
            RowBox[{"Map", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"SymbolJoin", "[", 
                RowBox[{"\"\<d\>\"", ",", "#"}], "]"}], "&"}], ",", "heads"}],
              "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"pheads", "=", 
            RowBox[{"Map", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"SymbolJoin", "[", 
                RowBox[{"\"\<p\>\"", ",", "#"}], "]"}], "&"}], ",", "heads"}],
              "]"}]}], ";"}], " ", "*)"}], "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", "Checks", " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"ValidateSymbol", "[", "chartname", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"ValidateSymbolInSession", "[", "chartname", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"!", 
            RowBox[{"ManifoldQ", "[", "manifold", "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefChart", "::", "unknown"}], ",", "\"\<manifold\>\"", 
              ",", "manifold"}], "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"!", 
            RowBox[{"IntegerQ", "[", 
             RowBox[{"DimOfManifold", "[", "manifold", "]"}], "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefChart", "::", "error"}], ",", 
              "\"\<Chart cannot be defined on a manifold with symbolic \
dimension.\>\""}], "]"}]}]}], "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Not", "@", "And"}], "@@", 
            RowBox[{"Join", "[", 
             RowBox[{"IntegerQ", "/@", "cnumbers"}], "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefChart", "::", "error"}], ",", 
              "\"\<The cnumbers must be integers.\>\""}], "]"}]}]}], "]"}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"DimOfManifold", "[", "manifold", "]"}], "\[NotEqual]", 
            RowBox[{"Length", "[", "cnumbers", "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefChart", "::", "error"}], ",", 
              "\"\<Incorrect number of cnumbers supplied.\>\""}], "]"}]}]}], 
          "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"DimOfManifold", "[", "manifold", "]"}], "\[NotEqual]", 
            RowBox[{"Length", "[", "scalars", "]"}]}], ",", 
           RowBox[{"Throw", "@", 
            RowBox[{"Message", "[", 
             RowBox[{
              RowBox[{"DefChart", "::", "error"}], ",", 
              "\"\<Incorrect number of scalars supplied.\>\""}], "]"}]}]}], 
          "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Check", " ", "eoom"}], " ", "*)"}], "\[IndentingNewLine]", 
         
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"Head", "[", "eoom", "]"}], "=!=", "List"}], "||", 
            RowBox[{
             RowBox[{"Length", "[", "eoom", "]"}], "=!=", "2"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"Throw", "@", 
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"DefChart", "::", "invalid"}], ",", "eoom", ",", 
               "\"\<value for option epsilonOrientationOfMetric\>\""}], 
              "]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"xTensorQ", "[", "#", "]"}]}], ",", 
             RowBox[{
              RowBox[{"ValidateSymbol", "[", "#", "]"}], "&&", 
              RowBox[{"ValidateSymbolInSession", "[", "#", "]"}]}]}], "]"}], 
           "&"}], "/@", "heads"}], ";", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{"ValidateSymbolInSession", "/@", "dheads"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"ValidateSymbolInSession", "/@", "pheads"}], ";"}], " ", 
          "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"MakexTensions", "[", 
          RowBox[{
          "DefChart", ",", "\"\<Beginning\>\"", ",", "chartname", ",", 
           "manifold", ",", "cnumbers", ",", "scalars", ",", "options"}], 
          "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", "Register", " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"xAct`xTensor`Private`MakeDefInfo", "[", 
          RowBox[{"DefChart", ",", "chartname", ",", "info"}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ChartQ", "[", "chartname", "]"}], "^=", "True"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ManifoldOfChart", "[", "chartname", "]"}], "^=", 
          "manifold"}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ChartColor", "[", "chartname", "]"}], "^=", "cc"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"$Charts", ",", "chartname"}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Changes", " ", "of", " ", "coordinates"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"xAct`xTensor`Private`SymbolRelations", "[", 
          RowBox[{"chartname", ",", "Null", ",", 
           RowBox[{"{", "manifold", "}"}]}], "]"}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
          "Define", " ", "coordinate", " ", "scalars", " ", "if", " ", "they",
            " ", "do", " ", "not", " ", "exist", " ", "yet"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"prot", "=", 
          RowBox[{"Unprotect", "/@", "heads"}]}], ";", "\[IndentingNewLine]", 
         
         RowBox[{
          RowBox[{"ServantsOf", "[", "chartname", "]"}], "^=", 
          RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"xTensorQ", "[", 
               RowBox[{"Head", "[", "#", "]"}], "]"}]}], ",", 
             RowBox[{"DefTensor", "[", 
              RowBox[{"#", ",", "manifold", ",", 
               RowBox[{"Master", "\[Rule]", "chartname"}], ",", 
               RowBox[{"DefInfo", "\[Rule]", 
                RowBox[{"If", "[", 
                 RowBox[{
                  RowBox[{"info", "===", "False"}], ",", "False", ",", 
                  RowBox[{"{", 
                   RowBox[{"\"\<coordinate scalar\>\"", ",", "\"\<\>\""}], 
                   "}"}]}], "]"}]}]}], "]"}]}], "]"}], "&"}], "/@", 
          "scalars"}], ";", "\[IndentingNewLine]", 
         RowBox[{"MapIndexed", "[", 
          RowBox[{
           RowBox[{"setinchart", "[", "chartname", "]"}], ",", "scalars"}], 
          "]"}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"ScalarsOfChart", "[", "chartname", "]"}], "^=", 
          "scalars"}], ";", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{
            RowBox[{"ChartRules", "[", "chartname", "]"}], "^=", 
            RowBox[{"Thread", "@", 
             RowBox[{"Rule", "[", 
              RowBox[{
               RowBox[{"manifold", "/@", "cnumbers"}], ",", "scalars"}], 
              "]"}]}]}], ";"}], "*)"}], "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Store", " ", "coordinate", " ", "names"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"Inner", "[", 
          RowBox[{"Set", ",", 
           RowBox[{
            RowBox[{
             RowBox[{"Coordinate", "[", 
              RowBox[{"#", ",", "chartname"}], "]"}], "&"}], "/@", 
            "cnumbers"}], ",", "heads", ",", "List"}], "]"}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Define", " ", "associated", " ", "mapping", " ", "to", " ", 
           RowBox[{"Reals", "[", "dim", "]"}]}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"DefMapping", "[", 
          RowBox[{"chartname", ",", " ", 
           RowBox[{"manifold", "\[Rule]", " ", 
            RowBox[{"Reals", "[", 
             RowBox[{"DimOfManifold", "[", "manifold", "]"}], "]"}]}], ",", 
           RowBox[{"ImmersionQ", "\[Rule]", "True"}], ",", 
           RowBox[{"SubmersionQ", "\[Rule]", "True"}], ",", 
           RowBox[{"InverseMapping", "\[Rule]", "Automatic"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"inv", "=", 
             RowBox[{"InverseMapping", "[", "chartname", "]"}]}], "}"}], ",", 
           
           RowBox[{
            RowBox[{"ChartIMapQ", "[", "inv", "]"}], "^=", "True"}]}], "]"}], 
         ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{"Define", " ", "associated", " ", "basis"}], ",", " ", 
           RowBox[{
           "which", " ", "in", " ", "turn", " ", "defines", " ", "the", " ", 
            "parallel", " ", 
            RowBox[{"derivative", ".", " ", "Turn"}], " ", "off", " ", 
            RowBox[{"formating", ".", " ", "Quiet"}], " ", 
            RowBox[{"OptionValue", "::", "nodef"}], " ", "because", " ", "we",
             " ", "are", " ", "passing", " ", "DefChart", " ", "options"}]}], 
          " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"Quiet", "[", 
          RowBox[{
           RowBox[{"DefBasis", "[", 
            RowBox[{"chartname", ",", 
             RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}], ",", 
             "cnumbers", ",", 
             RowBox[{"FormatBasis", "\[Rule]", "Automatic"}], ",", 
             RowBox[{"DefInfo", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"\"\<basis\>\"", ",", "\"\<Coordinated basis.\>\""}], 
               "}"}]}], ",", "options", ",", 
             RowBox[{"BasisColor", "\[Rule]", "cc"}]}], "]"}], ",", 
           RowBox[{"OptionValue", "::", "nodef"}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{
             "Define", " ", "shortcuts", " ", "for", " ", "basis", " ", 
              "elements", "\[IndentingNewLine]", 
              RowBox[{"Inner", "[", 
               RowBox[{"Hold", ",", 
                RowBox[{"Through", "[", 
                 RowBox[{"dheads", "[", "index_", "]"}], "]"}], ",", 
                RowBox[{
                 RowBox[{
                  RowBox[{"basis", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"#", ",", "chartname"}], "}"}], ",", "index"}], 
                   "]"}], "&"}], "/@", "cnumbers"}], ",", "List"}], "]"}]}], "/.", 
             RowBox[{"basis", "\[Rule]", "Basis"}]}], "/.", 
            RowBox[{"Hold", "\[Rule]", "SetDelayed"}]}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"Inner", "[", 
              RowBox[{"Hold", ",", 
               RowBox[{"Through", "[", 
                RowBox[{"pheads", "[", "index_", "]"}], "]"}], ",", 
               RowBox[{
                RowBox[{
                 RowBox[{"basis", "[", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "chartname"}]}], "}"}], ",", "index"}], 
                  "]"}], "&"}], "/@", "cnumbers"}], ",", "List"}], "]"}], "/.", 
             RowBox[{"basis", "\[Rule]", "Basis"}]}], "/.", 
            RowBox[{"Hold", "\[Rule]", "SetDelayed"}]}], ";"}], "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Define", " ", "position", " ", "vector"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Format", " ", "bases", " ", "elements"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"fb", "=!=", "Automatic"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"!", 
               RowBox[{"MatchQ", "[", 
                RowBox[{"fb", ",", 
                 RowBox[{"{", 
                  RowBox[{"_", ",", "_"}], "}"}]}], "]"}]}], ",", 
              RowBox[{"Throw", "@", 
               RowBox[{"Message", "[", 
                RowBox[{
                 RowBox[{"DefChart", "::", "invalid"}], ",", "fb", ",", 
                 "\"\<value for option FormatBasis\>\""}], "]"}]}]}], "]"}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"FormatUpVectors", "[", 
             RowBox[{
              RowBox[{"fb", "[", 
               RowBox[{"[", "1", "]"}], "]"}], ",", 
              RowBox[{"CIndicesOf", "[", 
               RowBox[{"-", "chartname"}], "]"}], ",", "scalars"}], "]"}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"FormatDownVectors", "[", 
             RowBox[{
              RowBox[{"fb", "[", 
               RowBox[{"[", "2", "]"}], "]"}], ",", 
              RowBox[{"CIndicesOf", "[", "chartname", "]"}], ",", "scalars"}],
              "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{"If", " ", "MetricInBasis", " ", "is", " ", "specified"}], 
           ",", " ", 
           RowBox[{
           "should", " ", "we", " ", "automatically", " ", "compute", " ", 
            RowBox[{"Christoffels", "?"}]}]}], " ", "*)"}], 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
          "Any", " ", "derivative", " ", "of", " ", "a", " ", "coordinate", 
           " ", "scalar", " ", "field", " ", "gives", " ", "a", " ", "Basis", 
           " ", "vector"}], " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"Inner", "[", 
          RowBox[{
           RowBox[{"coordinateder", "[", 
            RowBox[{"chartname", ",", "ecd"}], "]"}], ",", "heads", ",", 
           "cnumbers", ",", "List"}], "]"}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"MakexTensions", "[", 
          RowBox[{
          "DefChart", ",", "\"\<End\>\"", ",", "chartname", ",", "manifold", 
           ",", "cnumbers", ",", "scalars", ",", "options"}], "]"}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"Protect", "[", 
          RowBox[{"Evaluate", "[", "prot", "]"}], "]"}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
       "added", " ", "the", " ", "next", " ", "lines", " ", "to", " ", 
        "launch", " ", "my", " ", "internal", " ", "functions"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{"pr", ",", 
        RowBox[{
        "xAct`xPrint`Private`PrimedIndexForm", "[", "chartname", "]"}]}], 
       "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{"dpr", ",", 
        RowBox[{
        "xAct`xPrint`Private`DoublePrimedIndexForm", "[", "chartname", 
         "]"}]}], "]"}], ";"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"SetNumberOfArguments", "[", 
   RowBox[{"DefChart", ",", 
    RowBox[{"{", 
     RowBox[{"4", ",", "Infinity"}], "}"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Protect", "[", "DefChart", "]"}], ";"}]}], "Input",
 InitializationCell->True]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["1.4.7 SlotOfTensor[Basis] problem fix (patch to xTensor)", "Subsection"],

Cell["\<\
This is necessary to fix the SlotsOfTensor[Basis] problem.
 With the newer version of xTensor this patch to the xTensor code will be no \
longer necessary.\
\>", "Text"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Unprotect", "[", "Basis", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"SlotsOfTensor", "[", "Basis", "]"}], "^:=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"-", "All"}], ",", "All"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Protect", "[", "Basis", "]"}], ";"}]}], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["1.5. Private section", "Subsection"],

Cell[CellGroupData[{

Cell["Begin Private", "Subsubsection"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}]], "Input",
 InitializationCell->True],

Cell[BoxData["\<\"xAct`xPrint`Private`\"\>"], "Output"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Initialize some variables", "Subsubsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "If", " ", "you", " ", "do", " ", "not", " ", "like", " ", "these", " ", 
     "initial", " ", "settings"}], ",", " ", 
    RowBox[{
     RowBox[{"just", " ", "comment"}], "-", 
     RowBox[{
     "out", " ", "any", " ", "of", " ", "the", " ", "following", " ", "6", 
      " ", "lines", " ", "of", " ", "code"}]}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"$CovDFormat", "=", "\"\<Postfix\>\""}], ";"}], "   ", 
   RowBox[{"(*", " ", 
    RowBox[{"no", " ", "Covariant", " ", "Deltas", " ", "initially"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ABCOnQ", "=", "False"}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{"Automatic", " ", "basis", " ", "contraction", " ", "start"}], 
    " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"$PrePrint", "=", "ScreenDollarIndices"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"$DefInfoQ", "=", "False"}], ";"}], "  ", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"No", "  ", "Def"}], "-", 
     RowBox[{"inition", " ", "info", " ", "messages"}]}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"$UndefInfoQ", "=", "False"}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"No", "  ", "Undef"}], "-", 
     RowBox[{"inition", " ", "info", " ", "messages"}]}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"$CVVerbose", "=", "False"}], ";"}], "  ", 
   RowBox[{"(*", " ", 
    RowBox[{"Component", " ", "Value", " ", "verbose", " ", "off"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "-"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}\
]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PostfixStyleQ", ":=", 
     RowBox[{"$CovDFormat", "==", "\"\<Postfix\>\""}]}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{"turn", " ", "it", " ", "into", " ", "a", " ", "switch"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"IndicesScreenedQ", ":=", 
     RowBox[{"$PrePrint", "==", "ScreenDollarIndices"}]}], " ", ";"}], 
   RowBox[{"(*", " ", 
    RowBox[{"turn", " ", "it", " ", "into", " ", "a", " ", "switch"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"manifold", "=", "\"\<\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"LieDSymbol", "=", "\"\<\[ScriptCapitalL]\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SimpleManipulationQ", ":=", "True"}], "  ", ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"indexform", "=", "unprimed"}]}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Private and Public functions", "Subsubsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"xPrintValidQ", "[", "expr_", "]"}], ":=", 
  RowBox[{
   RowBox[{"Check", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Validate", "[", "expr", "]"}], ";", "True"}], ",", "False"}], 
    "]"}], "//", "Quiet"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"SetAttributes", "[", 
    RowBox[{"xPrintValidQ", ",", "HoldFirst"}], "]"}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"basisreset", "[", "basis_", "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"basischoice", "[", "k", "]"}], "=", "basis"}], ",", 
       RowBox[{"{", 
        RowBox[{"k", ",", "30"}], "}"}]}], "]"}], ";", 
     RowBox[{
      RowBox[{"cbasischoice", "[", "1", "]"}], "=", "basis"}], ";"}], ")"}]}],
   "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"lblposreset", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"lblpos", "[", "k", "]"}], "=", "1"}], ";", 
        RowBox[{
         RowBox[{"linput", "[", "k", "]"}], "=", "Null"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"k", ",", "30"}], "}"}]}], "]"}]}], ";"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"labelreset", "=", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"label", "[", "k", "]"}], "=", "\"\<\>\""}], ";", 
       RowBox[{
        RowBox[{"linput", "[", "k", "]"}], "=", "Null"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"k", ",", "30"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"idxup", "[", 
   RowBox[{"cdup_", ",", "basis_"}], "]"}], ":=", 
  RowBox[{"cdup", "/;", 
   RowBox[{"basis", "===", "AIndex"}]}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"idxup", "[", 
    RowBox[{"cdup_", ",", "basis_"}], "]"}], ":=", 
   RowBox[{"{", 
    RowBox[{"cdup", ",", "basis"}], "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"idxdown", "[", 
   RowBox[{"cdown_", ",", "basis_"}], "]"}], ":=", 
  RowBox[{
   RowBox[{"-", "cdown"}], "/;", 
   RowBox[{"basis", "===", "AIndex"}]}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"idxdown", "[", 
    RowBox[{"cdown_", ",", "basis_"}], "]"}], ":=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"IndicesOfVBundle", "@", 
            RowBox[{"VBundleOfBasis", "[", "basis", "]"}]}], ")"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "cdown"}], "]"}], ",", 
       RowBox[{"-", "cdown"}], ",", "cdown"}], "]"}], ",", 
     RowBox[{"-", "basis"}]}], "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"idx", "[", "int_Integer", "]"}], ":=", 
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"up", "[", "int", "]"}], "===", "\"\<\>\""}], ",", 
     RowBox[{"-", 
      RowBox[{"down", "[", "int", "]"}]}], ",", 
     RowBox[{"up", "[", "int", "]"}]}], "]"}], "/;", 
   RowBox[{
    RowBox[{"basischoice", "[", "int", "]"}], "===", 
    "AIndex"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"idx", "[", "int_Integer", "]"}], ":=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"up", "[", "int", "]"}], "===", "\"\<\>\""}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"IndicesOfVBundle", "@", 
              RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], 
             ")"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"down", "[", "int", "]"}]}], "]"}], ",", 
         RowBox[{"-", 
          RowBox[{"down", "[", "int", "]"}]}], ",", 
         RowBox[{"down", "[", "int", "]"}]}], "]"}], ",", 
       RowBox[{"-", 
        RowBox[{"basischoice", "[", "int", "]"}]}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"up", "[", "int", "]"}], ",", 
       RowBox[{"basischoice", "[", "int", "]"}]}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lblsign", "[", "int_", "]"}], ":=", 
  RowBox[{"Which", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"lblpos", "[", "int", "]"}], "==", "1"}], ",", 
    RowBox[{"-", "1"}], ",", 
    RowBox[{
     RowBox[{"lblpos", "[", "int", "]"}], "\[Equal]", "2"}], ",", "1"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"slot", "[", 
    RowBox[{"int_Integer", ",", "tensorhead_"}], "]"}], ":=", 
   RowBox[{"Switch", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"Which", "[", 
       RowBox[{
        RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
        RowBox[{
         RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
         RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
        "\[IndentingNewLine]", "True", ",", 
        RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], "]"}], "[", 
      RowBox[{"[", "int", "]"}], "]"}], ",", "\[IndentingNewLine]", "Labels", 
     ",", 
     RowBox[{"LI", "@", 
      RowBox[{"label", "[", "int", "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"-", "Labels"}], ",", 
     RowBox[{"-", 
      RowBox[{"LI", "@", 
       RowBox[{"label", "[", "int", "]"}]}]}], ",", "\[IndentingNewLine]", 
     "_", ",", 
     RowBox[{"idx", "[", "int", "]"}]}], "]"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"slot", "[", 
     RowBox[{"int_Integer", ",", "tensorhead_"}], "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}], "[", 
         RowBox[{"[", "int", "]"}], "]"}], "===", "Labels"}], "||", 
       RowBox[{
        RowBox[{
         RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}], "[", 
         RowBox[{"[", "int", "]"}], "]"}], "===", 
        RowBox[{"-", "Labels"}]}]}], ",", 
      RowBox[{
       RowBox[{"lblsign", "[", "int", "]"}], 
       RowBox[{"LI", "@", 
        RowBox[{"label", "[", "int", "]"}]}]}], ",", 
      RowBox[{"idx", "[", "int", "]"}]}], "]"}]}], "\[IndentingNewLine]", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cidx", "[", "int_Integer", "]"}], ":=", 
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"cup", "[", "int", "]"}], "===", "\"\<\>\""}], ",", 
     RowBox[{"-", 
      RowBox[{"cdown", "[", "int", "]"}]}], ",", 
     RowBox[{"cup", "[", "int", "]"}]}], "]"}], "/;", 
   RowBox[{
    RowBox[{"cbasischoice", "[", "int", "]"}], "===", 
    "AIndex"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"cidx", "[", "int_Integer", "]"}], ":=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"cup", "[", "int", "]"}], "===", "\"\<\>\""}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{"IndicesOfVBundle", "@", 
              RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], 
             ")"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{"cdown", "[", "int", "]"}]}], "]"}], ",", 
         RowBox[{"-", 
          RowBox[{"cdown", "[", "int", "]"}]}], ",", 
         RowBox[{"cdown", "[", "int", "]"}]}], "]"}], ",", 
       RowBox[{"-", 
        RowBox[{"cbasischoice", "[", "int", "]"}]}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"cup", "[", "int", "]"}], ",", 
       RowBox[{"cbasischoice", "[", "int", "]"}]}], "}"}]}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GdeltaSlots", "[", "gdslots_", "]"}], ":=", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"ConstantArray", "[", 
      RowBox[{
       RowBox[{"-", "1"}], ",", "gdslots"}], "]"}], ",", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{"1", ",", "gdslots"}], "]"}]}], "]"}]}], "\[IndentingNewLine]", 
  
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pastedexpr", ":=", 
   RowBox[{"Which", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"manifold", "===", "\"\<\>\""}], ",", "\"\<No Manifold\>\"", ",",
      "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tensorhead", "===", "\"\<\>\""}], " ", "&&", " ", 
      RowBox[{"cdchoice", "===", "\"\<\>\""}]}], ",", "\"\<No expression\>\"",
      ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tensorhead", "===", "delta"}], " ", "&&", " ", 
      RowBox[{"\[Not]", 
       RowBox[{"MetricEndowedQ", "[", 
        RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}], "]"}]}], "&&", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"down", "[", "1", "]"}], "===", "\"\<\>\""}], "||", 
        RowBox[{
         RowBox[{"up", "[", "2", "]"}], "===", "\"\<\>\""}]}], ")"}]}], ",", 
     "\"\<Not a tensor\>\"", ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tensorhead", "===", "Basis"}], " ", "&&", 
      RowBox[{"\[Not]", 
       RowBox[{"MetricEndowedQ", "[", 
        RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}], "]"}]}], "&&",
       " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"down", "[", "1", "]"}], "===", "\"\<\>\""}], "||", 
        RowBox[{
         RowBox[{"up", "[", "2", "]"}], "===", "\"\<\>\""}]}], ")"}]}], ",", 
     "\"\<Not a tensor\>\"", ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tensorhead", "===", "Gdelta"}], " ", "&&", 
      RowBox[{"\[Not]", 
       RowBox[{"MetricEndowedQ", "[", 
        RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}], "]"}]}], "&&",
       " ", 
      RowBox[{"Or", "@@", 
       RowBox[{"Flatten", "@", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{
             RowBox[{"down", "[", "ii", "]"}], "===", "\"\<\>\""}], ",", 
            RowBox[{
             RowBox[{"up", "[", 
              RowBox[{"ii", "+", "gdslots"}], "]"}], "===", "\"\<\>\""}]}], 
           "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"ii", ",", "gdslots"}], "}"}]}], "]"}]}]}]}], ",", 
     "\"\<Not a tensor\>\"", ",", "\[IndentingNewLine]", 
     RowBox[{"tensorhead", "=!=", "\"\<\>\""}], ",", 
     RowBox[{"completetensor", "[", "tensorhead", "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"cdchoice", "===", "LieD"}], ",", "\"\<LieD\>\"", " ", 
     RowBox[{"(*", "  ", 
      RowBox[{"this", " ", "value", " ", "is", " ", "not", " ", "used"}], " ",
       "*)"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"cdchoice", "===", "ParamD"}], " ", "&&", 
      RowBox[{"paramchoice", "=!=", "\"\<\>\""}]}], ",", "\"\<ParamD\>\"", 
     " ", 
     RowBox[{"(*", "  ", 
      RowBox[{"this", " ", "value", " ", "is", " ", "not", " ", "used"}], " ",
       "*)"}], ",", "\[IndentingNewLine]", 
     RowBox[{"cdchoice", "===", "OverDot"}], ",", "\"\<OverDot\>\"", " ", 
     RowBox[{"(*", "  ", 
      RowBox[{"this", " ", "value", " ", "is", " ", "not", " ", "used"}], " ",
       "*)"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"cdchoice", "===", "Bracket"}], " ", "&&", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"cdown", "[", "1", "]"}], "=!=", "\"\<\>\""}], "||", 
        RowBox[{
         RowBox[{"cup", "[", "1", "]"}], "=!=", "\"\<\>\""}]}], ")"}]}], ",", 
     
     RowBox[{
      RowBox[{"(", 
       RowBox[{"Bracket", "@@", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"cidx", "[", "k", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"k", ",", "1"}], "}"}]}], "]"}]}], ")"}], "[", "]"}], " ", 
     ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"cdchoice", "=!=", "\"\<\>\""}], "&&", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"cdown", "[", "1", "]"}], "=!=", "\"\<\>\""}], "||", 
        RowBox[{
         RowBox[{"cup", "[", "1", "]"}], "=!=", "\"\<\>\""}]}], ")"}]}], ",", 
     
     RowBox[{
      RowBox[{"(", 
       RowBox[{"cdchoice", "@@", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"cidx", "[", "k", "]"}], ",", 
          RowBox[{"{", 
           RowBox[{"k", ",", "1"}], "}"}]}], "]"}]}], ")"}], "[", "]"}], " ", 
     ",", "\[IndentingNewLine]", 
     RowBox[{"cdchoice", "=!=", "\"\<\>\""}], ",", 
     "\"\<No Cov. Derivative\>\""}], "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"completetensor", "[", 
     RowBox[{"tensorhead_", "?", "xTensorQ"}], "]"}], ":=", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"xPrintValidQ", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"tensorhead", "@@", 
         RowBox[{"Table", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"idx", "[", "k", "]"}], ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{"k", ",", 
             RowBox[{
              RowBox[{"Which", "[", 
               RowBox[{
                RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
                RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
                "\[IndentingNewLine]", 
                RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
                "\[IndentingNewLine]", "True", ",", 
                RowBox[{"Length", "@", 
                 RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], "]"}],
               "//", "Evaluate"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
        "//", "Evaluate"}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"tensorhead", "@@", 
        RowBox[{"Table", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"idx", "[", "k", "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"{", 
           RowBox[{"k", ",", 
            RowBox[{
             RowBox[{"Which", "[", 
              RowBox[{
               RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
               RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
               RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
               "\[IndentingNewLine]", "True", ",", 
               RowBox[{"Length", "@", 
                RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], "]"}], 
             "//", "Evaluate"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
       " ", "//", "ScreenDollarIndices"}], "\[IndentingNewLine]", ",", " ", 
      "\"\<Not a tensor\>\""}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"completetensor", "[", 
   RowBox[{"tensorhead_", "?", "xTensorQ"}], "]"}], ":=", 
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"xPrintValidQ", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tensorhead", "@@", 
       RowBox[{"Table", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"slot", "[", 
          RowBox[{"k", ",", "tensorhead"}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"k", ",", 
           RowBox[{
            RowBox[{"Which", "[", 
             RowBox[{
              RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
              RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", "True", 
              ",", 
              RowBox[{"Length", "@", 
               RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], "]"}], "//",
             "Evaluate"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], "//", 
      "Evaluate"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"tensorhead", "@@", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"slot", "[", 
         RowBox[{"k", ",", "tensorhead"}], "]"}], ",", "\[IndentingNewLine]", 
        
        RowBox[{"{", 
         RowBox[{"k", ",", 
          RowBox[{
           RowBox[{"Which", "[", 
            RowBox[{
             RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
             RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
             RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
             "\[IndentingNewLine]", 
             RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
             "\[IndentingNewLine]", "True", ",", 
             RowBox[{"Length", "@", 
              RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], "]"}], "//",
            "Evaluate"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], " ", "//",
      "ScreenDollarIndices"}], "\[IndentingNewLine]", ",", " ", 
    "\"\<Not a tensor\>\""}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"completetensor", "[", "tensorhead_", "]"}], ":=", " ", 
   "\"\<Not a tensor\>\""}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"My", " ", "cnumbersof", " ", "function"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cnumbersof", "[", "basis_", "]"}], ":=", 
  RowBox[{
   RowBox[{"CNumbersOf", "[", "basis", " ", "]"}], "/;", 
   RowBox[{"basis", "=!=", "AIndex"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"cnumbersof", "[", "basis_", "]"}], ":=", 
   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"abstractandbasesall", ":=", 
   RowBox[{
    RowBox[{"{", "AIndex", "}"}], "~", "Join", "~", "$Bases"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"abstractandbases", "[", "manifold_", "]"}], ":=", 
   RowBox[{
    RowBox[{"{", "AIndex", "}"}], "~", "Join", "~", 
    RowBox[{"Select", "[", 
     RowBox[{"$Bases", ",", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"VBundleOfBasis", "[", "#", "]"}], "===", 
         RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], ")"}], 
       "&"}]}], "]"}]}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "this", " ", "function", " ", "also", " ", "displays", " ", "the", " ", 
    "basis", " ", "name"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"abstractandbasesdisks", "[", "manifold_", "]"}], ":=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"Style", "[", 
      RowBox[{
       RowBox[{
       "\"\<\[FilledCircle]\>\"", "<>", "\"\<  \>\"", "<>", 
        "\"\<AIndex\>\""}], ",", "Black"}], "]"}], "}"}], "~", "Join", "~", 
    RowBox[{"(", 
     RowBox[{"MapThread", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Style", "[", 
         RowBox[{
          RowBox[{"\"\<\[FilledCircle]\>\"", "<>", "\"\<  \>\"", "<>", 
           RowBox[{"ToString", "@", "#2"}]}], ",", "#1"}], "]"}], "&"}], ",", 
       
       RowBox[{"{", 
        RowBox[{
         RowBox[{"BasisColor", "/@", 
          RowBox[{"Select", "[", 
           RowBox[{"$Bases", ",", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"VBundleOfBasis", "[", "#", "]"}], "===", 
               RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], 
              ")"}], "&"}]}], "]"}]}], ",", 
         RowBox[{"Select", "[", 
          RowBox[{"$Bases", ",", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"VBundleOfBasis", "[", "#", "]"}], "===", 
              RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], 
             ")"}], "&"}]}], "]"}]}], "}"}]}], "]"}], ")"}]}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"tensormenuselection", "[", "manifold_", "]"}], ":=", 
  RowBox[{
   RowBox[{
    RowBox[{"(", 
     RowBox[{"$Tensors", "\[Intersection]", 
      RowBox[{"VisitorsOf", "[", "manifold", "]"}]}], ")"}], "\[Union]", 
    RowBox[{"{", 
     RowBox[{"delta", ",", "Gdelta", ",", "Basis"}], "}"}]}], "/;", 
   RowBox[{
    RowBox[{"$Manifolds", "=!=", 
     RowBox[{"{", "}"}]}], "&&", 
    RowBox[{"manifold", "=!=", "\"\<\>\""}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"tensormenuselection", "[", "manifold_", "]"}], ":=", 
   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "all", " ", "derivatives", " ", "operators", " ", "on", " ", "a", " ", 
    "manifold"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"derivativesmenuselection", "[", "manifold_", "]"}], ":=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"PD", ",", "Diff", ",", "LieD", ",", "Bracket"}], "}"}], "~", 
    "Join", "~", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"$CovDs", "\[Intersection]", 
        RowBox[{"VisitorsOf", "[", "manifold", "]"}]}], ")"}], "\[Union]", 
      RowBox[{"{", 
       RowBox[{"ParamD", ",", "OverDot"}], "}"}]}], ")"}]}], "/;", 
   RowBox[{
    RowBox[{"$Manifolds", "=!=", 
     RowBox[{"{", "}"}]}], "&&", 
    RowBox[{"manifold", "=!=", "\"\<\>\""}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"derivativesmenuselection", "[", "manifold_", "]"}], ":=", 
   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "all", " ", "commutable", " ", "derivatives", " ", "operators", " ", "on", 
    " ", "a", " ", "manifold"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"commderivativesmenuselection", "[", "manifold_", "]"}], ":=", 
  RowBox[{
   RowBox[{
    RowBox[{"{", "PD", "}"}], "~", "Join", "~", 
    RowBox[{"(", 
     RowBox[{"$CovDs", "\[Intersection]", 
      RowBox[{"VisitorsOf", "[", "manifold", "]"}]}], ")"}]}], "/;", 
   RowBox[{
    RowBox[{"$Manifolds", "=!=", 
     RowBox[{"{", "}"}]}], "&&", 
    RowBox[{"manifold", "=!=", "\"\<\>\""}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"commderivativesmenuselection", "[", "manifold_", "]"}], ":=", 
   RowBox[{"{", "}"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BracketTagUp", "[", "basis_", "]"}], ":=", 
  RowBox[{"\"\<Bracket\>\"", "<>", "\"\<_\>\"", "<>", 
   RowBox[{"ToString", "[", "basis", "]"}], "<>", "\"\<_\>\"", "<>", 
   "\"\<Tag\>\"", "<>", "\"\<Up\>\""}]}], "\[IndentingNewLine]", 
 RowBox[{"BracketTagsListUp", ":=", 
  RowBox[{
  "BracketTagUp", "/@", "abstractandbasesall"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BracketTagDown", "[", "basis_", "]"}], ":=", 
  RowBox[{"\"\<Bracket\>\"", "<>", "\"\<_\>\"", "<>", 
   RowBox[{"ToString", "[", "basis", "]"}], "<>", "\"\<_\>\"", "<>", 
   "\"\<Tag\>\"", "<>", "\"\<Down\>\""}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BracketTagsListDown", ":=", 
   RowBox[{"BracketTagDown", "/@", "abstractandbasesall"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"StringTagPrefixUp", "[", 
   RowBox[{"cdchoice_", ",", "basis_"}], "]"}], ":=", 
  RowBox[{
   RowBox[{"ToString", "[", "cdchoice", "]"}], "<>", "\"\<_\>\"", "<>", 
   RowBox[{"ToString", "[", "basis", "]"}], "<>", "\"\<_\>\"", "<>", 
   "\"\<Tag\>\"", "<>", "\"\<PrefixUp\>\""}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"StringTagPrefixDown", "[", 
   RowBox[{"cdchoice_", ",", "basis_"}], "]"}], ":=", 
  RowBox[{
   RowBox[{"ToString", "[", "cdchoice", "]"}], "<>", "\"\<_\>\"", "<>", 
   RowBox[{"ToString", "[", "basis", "]"}], "<>", "\"\<_\>\"", "<>", 
   "\"\<Tag\>\"", "<>", "\"\<PrefixDown\>\""}]}], "\[IndentingNewLine]", 
 RowBox[{"StringTagsListPrefixUp", ":=", 
  RowBox[{
   RowBox[{"Outer", "[", 
    RowBox[{"StringTagPrefixUp", ",", "$CovDs", ",", "abstractandbasesall"}], 
    "]"}], "//", "Flatten"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"StringTagsListPrefixDown", ":=", 
   RowBox[{
    RowBox[{"Outer", "[", 
     RowBox[{
     "StringTagPrefixDown", ",", "$CovDs", ",", "abstractandbasesall"}], 
     "]"}], "//", "Flatten"}]}], "\n", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"StringTagPostfix", "[", "cdchoice_", "]"}], ":=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"ToString", "[", "cdchoice", "]"}], "<>", "\"\<Tag\>\"", "<>", 
       "\"\<Postfix\>\""}], "\[IndentingNewLine]", "StringTagsListPostfix"}], 
     ":=", 
     RowBox[{"StringTagPostfix", "/@", "$CovDs"}]}]}], "\[IndentingNewLine]", 
   "*)"}], "\n", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ButtonLabelStyle", "[", "x_", "]"}], ":=", 
   RowBox[{"Style", "[", 
    RowBox[{"x", ",", "10"}], "]"}]}], "\n", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PrimedIndexForm", "[", "basis_", "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Unprotect", "[", "IndexForm", "]"}], ";", "\n", 
     RowBox[{
      RowBox[{"IndexForm", "[", 
       RowBox[{"{", 
        RowBox[{"ind_Integer", ",", "basis"}], "}"}], "]"}], ":=", 
      RowBox[{"ColorString", "[", 
       RowBox[{
        RowBox[{"StringJoin", "[", 
         RowBox[{
          RowBox[{"CIndexForm", "[", 
           RowBox[{"ind", ",", "basis"}], "]"}], ",", "\"\<'\>\""}], "]"}], 
        ",", 
        RowBox[{"BasisColor", "[", "basis", "]"}]}], "]"}]}], ";", "\n", 
     RowBox[{
      RowBox[{"IndexForm", "[", 
       RowBox[{"{", 
        RowBox[{"ind_", ",", "basis"}], "}"}], "]"}], ":=", 
      RowBox[{"ColorString", "[", 
       RowBox[{
        RowBox[{"StringJoin", "[", 
         RowBox[{
          RowBox[{"IndexForm", "[", "ind", "]"}], ",", "\"\<'\>\""}], "]"}], 
        ",", 
        RowBox[{"BasisColor", "[", "basis", "]"}]}], "]"}]}], ";", "\n", 
     RowBox[{"Protect", "[", "IndexForm", "]"}], ";"}], ")"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"DefPrimedBasis", "[", 
      RowBox[{"basis_", ",", "x__"}], "]"}], ":=", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"DefBasis", "[", 
        RowBox[{"basis", ",", "x"}], "]"}], ";", 
       RowBox[{"PrimedIndexForm", "[", "basis", "]"}]}], ")"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"DefPrimedChart", "[", 
      RowBox[{"chart_", ",", "x__"}], "]"}], ":=", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"DefChart", "[", 
        RowBox[{"chart", ",", "x"}], "]"}], ";", 
       RowBox[{"PrimedIndexForm", "[", "chart", "]"}]}], ")"}]}], ";"}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"DoublePrimedIndexForm", "[", "basis_", "]"}], ":=", 
   RowBox[{"(", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Unprotect", "[", "IndexForm", "]"}], ";", "\n", 
     RowBox[{
      RowBox[{"IndexForm", "[", 
       RowBox[{"{", 
        RowBox[{"ind_Integer", ",", "basis"}], "}"}], "]"}], ":=", 
      RowBox[{"ColorString", "[", 
       RowBox[{
        RowBox[{"StringJoin", "[", 
         RowBox[{
          RowBox[{"CIndexForm", "[", 
           RowBox[{"ind", ",", "basis"}], "]"}], ",", "\"\<''\>\""}], "]"}], 
        ",", 
        RowBox[{"BasisColor", "[", "basis", "]"}]}], "]"}]}], ";", "\n", 
     RowBox[{
      RowBox[{"IndexForm", "[", 
       RowBox[{"{", 
        RowBox[{"ind_", ",", "basis"}], "}"}], "]"}], ":=", 
      RowBox[{"ColorString", "[", 
       RowBox[{
        RowBox[{"StringJoin", "[", 
         RowBox[{
          RowBox[{"IndexForm", "[", "ind", "]"}], ",", "\"\<''\>\""}], "]"}], 
        ",", 
        RowBox[{"BasisColor", "[", "basis", "]"}]}], "]"}]}], ";", "\n", 
     RowBox[{"Protect", "[", "IndexForm", "]"}], ";"}], "\[IndentingNewLine]",
     ")"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"DefDoublePrimedBasis", "[", 
      RowBox[{"basis_", ",", "x__"}], "]"}], ":=", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"DefBasis", "[", 
        RowBox[{"basis", ",", "x"}], "]"}], ";", 
       RowBox[{"DoublePrimedIndexForm", "[", "basis", "]"}]}], ")"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"DefDoublePrimedChart", "[", 
      RowBox[{"chart_", ",", "x__"}], "]"}], ":=", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"DefChart", "[", 
        RowBox[{"chart", ",", "x"}], "]"}], ";", 
       RowBox[{"DoublePrimedIndexForm", "[", "chart", "]"}]}], ")"}]}], ";"}],
    "\[IndentingNewLine]", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}]}], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Parsing of derivatives expressions", "Subsubsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", "Diff", " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", "\"\<DiffTag\>\""}], "]"}], ",", "form_"}], 
     "]"}], ":=", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
     RowBox[{
      RowBox[{"RowBox", "[", 
       RowBox[{"{", 
        RowBox[{"\"\<d\>\"", ",", "x_"}], "}"}], "]"}], "\[RuleDelayed]", 
      RowBox[{"Diff", "[", 
       RowBox[{"ToExpression", "@", "x"}], "]"}]}]}]}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", "LieD", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", "\"\<LieTag\>\""}], "]"}], ",", "form_"}], "]"}],
     ":=", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
      RowBox[{
       RowBox[{"RowBox", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"SubscriptBox", "[", 
           RowBox[{"\"\<\[ScriptCapitalL]\>\"", ",", "x_"}], "]"}], ",", 
          "y_"}], "}"}], "]"}], "\[RuleDelayed]", 
       RowBox[{
        RowBox[{"LieD", "[", 
         RowBox[{"ToExpression", "@", "x"}], "]"}], "[", 
        RowBox[{"ToExpression", "@", "y"}], "]"}]}]}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
     RowBox[{
      RowBox[{"RowBox", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"SubscriptBox", "[", 
          RowBox[{"lie_", ",", "x_"}], "]"}], ",", "y_"}], "}"}], "]"}], 
      "\[RuleDelayed]", 
      RowBox[{
       RowBox[{"LieD", "[", 
        RowBox[{"ToExpression", "@", "x"}], "]"}], "[", 
       RowBox[{"ToExpression", "@", "y"}], "]"}]}]}]}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", "Bracket", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", 
        RowBox[{"brtag_", "?", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"BracketTagsListUp", ",", "#"}], "]"}], "&"}], ")"}]}]}], 
       "]"}], ",", "form_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
     RowBox[{
      RowBox[{"SuperscriptBox", "[", "\n", "    ", 
       RowBox[{
        RowBox[{"RowBox", "[", 
         RowBox[{"{", 
          RowBox[{"\"\<[\>\"", ",", 
           RowBox[{"RowBox", "[", 
            RowBox[{"{", 
             RowBox[{"v1_", ",", "\"\<,\>\"", ",", "v2_"}], "}"}], "]"}], 
           ",", "\"\<]\>\""}], "}"}], "]"}], ",", " ", "z_"}], "]"}], 
      "\[RuleDelayed]", 
      RowBox[{
       RowBox[{"Bracket", "[", 
        RowBox[{
         RowBox[{"ToExpression", "@", "v1"}], ",", 
         RowBox[{"ToExpression", "@", "v2"}]}], "]"}], "[", 
       RowBox[{"idxup", "[", 
        RowBox[{
         RowBox[{"ToExpression", "@", "z"}], ",", 
         RowBox[{"Symbol", "@", 
          RowBox[{
           RowBox[{"StringSplit", "[", 
            RowBox[{"brtag", ",", "\"\<_\>\""}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}]}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", 
        RowBox[{"brtag_", "?", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"BracketTagsListDown", ",", "#"}], "]"}], "&"}], 
          ")"}]}]}], "]"}], ",", "form_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
     RowBox[{
      RowBox[{"SubscriptBox", "[", "\n", "    ", 
       RowBox[{
        RowBox[{"RowBox", "[", 
         RowBox[{"{", 
          RowBox[{"\"\<[\>\"", ",", 
           RowBox[{"RowBox", "[", 
            RowBox[{"{", 
             RowBox[{"v1_", ",", "\"\<,\>\"", ",", "v2_"}], "}"}], "]"}], 
           ",", "\"\<]\>\""}], "}"}], "]"}], ",", " ", "z_"}], "]"}], 
      "\[RuleDelayed]", 
      RowBox[{
       RowBox[{"Bracket", "[", 
        RowBox[{
         RowBox[{"ToExpression", "@", "v1"}], ",", 
         RowBox[{"ToExpression", "@", "v2"}]}], "]"}], "[", 
       RowBox[{"idxdown", "[", 
        RowBox[{
         RowBox[{"ToExpression", "@", "z"}], ",", 
         RowBox[{"Symbol", "@", 
          RowBox[{
           RowBox[{"StringSplit", "[", 
            RowBox[{"brtag", ",", "\"\<_\>\""}], "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}]}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"OLD", " ", "Bracket"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"MakeExpression", "[", 
      RowBox[{
       RowBox[{"TagBox", "[", 
        RowBox[{"expr_", ",", 
         RowBox[{"brtag_", "?", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"MemberQ", "[", 
             RowBox[{"BracketTagsListUp", ",", "#"}], "]"}], "&"}], ")"}]}]}],
         "]"}], ",", "form_"}], "]"}], ":=", 
     RowBox[{
      RowBox[{
       RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
       RowBox[{
        RowBox[{"SuperscriptBox", "[", "\n", "    ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", 
            RowBox[{"\"\<[\>\"", ",", 
             RowBox[{"RowBox", "[", 
              RowBox[{"{", 
               RowBox[{"v1_", ",", "\"\<,\>\"", ",", "v2_"}], "}"}], "]"}], 
             ",", "\"\<]\>\""}], "}"}], "]"}], ",", " ", "z_"}], "]"}], 
        "\[RuleDelayed]", 
        RowBox[{
         RowBox[{
          RowBox[{"Bracket", "[", 
           RowBox[{"idxup", "[", 
            RowBox[{
             RowBox[{"ToExpression", "@", "z"}], ",", 
             RowBox[{"Symbol", "@", 
              RowBox[{
               RowBox[{"StringSplit", "[", 
                RowBox[{"brtag", ",", "\"\<_\>\""}], "]"}], "[", 
               RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}], "[", 
          RowBox[{
           RowBox[{"ToExpression", "@", "v1"}], ",", 
           RowBox[{"ToExpression", "@", "v2"}]}], "]"}], 
         "\[IndentingNewLine]", 
         RowBox[{"MakeExpression", "[", 
          RowBox[{
           RowBox[{"TagBox", "[", 
            RowBox[{"expr_", ",", 
             RowBox[{"brtag_", "?", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"MemberQ", "[", 
                 RowBox[{"BracketTagsListDown", ",", "#"}], "]"}], "&"}], 
               ")"}]}]}], "]"}], ",", "form_"}], "]"}]}]}]}], ":=", 
      RowBox[{
       RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
       RowBox[{
        RowBox[{"SubscriptBox", "[", "\n", "    ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", 
            RowBox[{"\"\<[\>\"", ",", 
             RowBox[{"RowBox", "[", 
              RowBox[{"{", 
               RowBox[{"v1_", ",", "\"\<,\>\"", ",", "v2_"}], "}"}], "]"}], 
             ",", "\"\<]\>\""}], "}"}], "]"}], ",", " ", "z_"}], "]"}], 
        "\[RuleDelayed]", 
        RowBox[{
         RowBox[{"Bracket", "[", 
          RowBox[{"idxdown", "[", 
           RowBox[{
            RowBox[{"ToExpression", "@", "z"}], ",", 
            RowBox[{"Symbol", "@", 
             RowBox[{
              RowBox[{"StringSplit", "[", 
               RowBox[{"brtag", ",", "\"\<_\>\""}], "]"}], "[", 
              RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}], "[", 
         RowBox[{
          RowBox[{"ToExpression", "@", "v1"}], ",", 
          RowBox[{"ToExpression", "@", "v2"}]}], "]"}]}]}]}]}], 
    "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"CovDs", " ", "Up", " ", "and", " ", "Prefix"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"In", " ", "the", " ", "following", " ", "code"}], ",", " ", 
     RowBox[{
     "I", " ", "do", " ", "not", " ", "need", " ", "to", " ", "check", " ", 
      "too", " ", "much", " ", "der_"}], ",", " ", 
     RowBox[{
     "since", " ", "I", " ", "know", " ", "it", " ", "is", " ", "acceptable", 
      " ", "from", " ", "the", " ", "tag"}]}], "*)"}], "\[IndentingNewLine]", 
   
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
     "if", " ", "the", " ", "tag", " ", "has", " ", "been", " ", 
      "recognized"}], ",", " ", 
     RowBox[{
     "than", " ", "der_", " ", "must", " ", "be", " ", "acceptable"}]}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", 
        RowBox[{"cdtag_", "?", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"StringTagsListPrefixUp", ",", "#"}], "]"}], "&"}], 
          ")"}]}]}], "]"}], ",", "form_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", "\[IndentingNewLine]", 
     
     RowBox[{
      RowBox[{"RowBox", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"SuperscriptBox", "[", 
          RowBox[{"der_", ",", " ", "x_"}], "]"}], ",", "y_"}], "}"}], "]"}], 
      "\[RuleDelayed]", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"Symbol", "@", 
          RowBox[{"First", "@", 
           RowBox[{"StringSplit", "[", 
            RowBox[{"cdtag", ",", "\"\<_\>\""}], "]"}]}]}], ")"}], "[", 
        RowBox[{"idxup", "[", 
         RowBox[{
          RowBox[{"ToExpression", "@", "x"}], ",", 
          RowBox[{"Symbol", "@", 
           RowBox[{
            RowBox[{"StringSplit", "[", 
             RowBox[{"cdtag", ",", "\"\<_\>\""}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}], "[", 
       RowBox[{"ToExpression", "@", "y"}], "]"}]}]}]}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"CovDs", " ", "Down", " ", "and", " ", "Prefix"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"In", " ", "the", " ", "following", " ", "code"}], ",", " ", 
     RowBox[{
     "I", " ", "do", " ", "not", " ", "need", " ", "to", " ", "check", " ", 
      "too", " ", "much", " ", "der_"}], ",", " ", 
     RowBox[{
     "since", " ", "I", " ", "know", " ", "it", " ", "is", " ", "acceptable", 
      " ", "from", " ", "the", " ", "tag"}]}], "*)"}], "\[IndentingNewLine]", 
   
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
     "if", " ", "the", " ", "tag", " ", "has", " ", "been", " ", 
      "recognized"}], ",", " ", 
     RowBox[{
     "than", " ", "der_", " ", "must", " ", "be", " ", "acceptable"}]}], 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MakeExpression", "[", 
     RowBox[{
      RowBox[{"TagBox", "[", 
       RowBox[{"expr_", ",", 
        RowBox[{"cdtag_", "?", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"MemberQ", "[", 
            RowBox[{"StringTagsListPrefixDown", ",", "#"}], "]"}], "&"}], 
          ")"}]}]}], "]"}], ",", "form_"}], "]"}], ":=", 
    RowBox[{
     RowBox[{"HoldComplete", "[", "expr", "]"}], "/.", 
     RowBox[{
      RowBox[{"RowBox", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"SubscriptBox", "[", 
          RowBox[{"der_", ",", " ", "x_"}], "]"}], ",", "y_"}], "}"}], "]"}], 
      "\[RuleDelayed]", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"Symbol", "@", 
          RowBox[{"First", "@", 
           RowBox[{"StringSplit", "[", 
            RowBox[{"cdtag", ",", "\"\<_\>\""}], "]"}]}]}], ")"}], "[", 
        RowBox[{"idxdown", "[", 
         RowBox[{
          RowBox[{"ToExpression", "@", "x"}], ",", 
          RowBox[{"Symbol", "@", 
           RowBox[{
            RowBox[{"StringSplit", "[", 
             RowBox[{"cdtag", ",", "\"\<_\>\""}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}], "[", 
       RowBox[{"ToExpression", "@", "y"}], "]"}]}]}]}]}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Help Menu", "Subsubsection"],

Cell[BoxData[
 RowBox[{"HelpMenuContents", ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"\"\<xPrint Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<xPrint\>\"", ",", "\"\<Documentation\>\"", ",", 
         "\"\<English\>\"", ",", "\"\<xPrintDoc.nb\>\""}], "}"}], "]"}], 
      "]"}]}], ",", 
    RowBox[{"\"\<xPrint tutorials\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"SystemDialogInput", "[", 
       RowBox[{"\"\<FileOpen\>\"", ",", 
        RowBox[{"FileNameJoin", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"First", "@", 
            RowBox[{"FileNames", "[", 
             RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
           "\"\<xPrint\>\"", ",", "\"\<Documentation\>\"", ",", 
           "\"\<English\>\"", ",", "\"\<Tutorials\>\""}], "}"}], "]"}]}], 
       "]"}], "]"}]}], ",", "\[IndentingNewLine]", "Delimiter", ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<xCore Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xCoreDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", " ", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<xPerm Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xPermDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<xTensor Doc\>\"", ":>", " ", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xTensorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", " ", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<xTensor Ref. Guide\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xTensorRefGuide.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<xCoba Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xCobaDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<xCoba Doc2\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xCobaDoc2.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<xTerior Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xTeriorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<xTras Doc\>\"", ":>", 
     RowBox[{"SystemOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xTras.pdf\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<SymManipulator Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<SymManipulatorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<xPert Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<xPertDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", " ", 
    RowBox[{"\"\<Harmonics Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<HarmonicsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Invar Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<InvarDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", " ", 
    RowBox[{"\"\<Spinors Doc\>\"", ":>", 
     RowBox[{"NotebookOpen", "[", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "@", 
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
         "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
         "\"\<SpinorsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
    "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", " ", 
    RowBox[{"\"\<xPrint site\>\"", ":>", 
     RowBox[{
     "SystemOpen", "[", "\"\<http://sites.google.com/site/xprintforxact/\>\"",
       "]"}]}], ",", "\[IndentingNewLine]", " ", 
    RowBox[{"\"\<xAct site\>\"", ":>", 
     RowBox[{
     "SystemOpen", "[", 
      "\"\<http://metric.iem.csic.es/Martin-Garcia/xAct/index.html\>\"", 
      "]"}]}], ",", "\[IndentingNewLine]", " ", 
    RowBox[{"\"\<xAct group\>\"", ":>", 
     RowBox[{
     "SystemOpen", "[", 
      "\"\<http://groups.google.com/group/xact/topics?hl=en\>\"", "]"}]}], 
    ",", "\[IndentingNewLine]", "Delimiter", ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<About xPrint...\>\"", ":>", 
     RowBox[{"DisplaySplash", "[", "5", "]"}]}]}], "}"}]}]], "Input",
 InitializationCell->True],

Cell[BoxData[
 RowBox[{"HelpMenu", ":=", 
  RowBox[{"Tooltip", "[", 
   RowBox[{
    RowBox[{"ActionMenu", "[", "\n", "                  ", 
     RowBox[{
      RowBox[{"Graphics", "[", 
       RowBox[{
        RowBox[{"{", "\n", "                    ", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"RGBColor", "[", 
             RowBox[{"0.689647", ",", " ", "0.761166", ",", " ", "0.805478"}],
              "]"}], ",", " ", "\n", "                    ", 
            RowBox[{"Disk", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
             "]"}]}], "}"}], ",", " ", "\n", "                    ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"GrayLevel", "[", "0", "]"}], ",", " ", 
            RowBox[{"Circle", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], "]"}], 
            ",", " ", "\n", "                    ", 
            RowBox[{"Style", "[", 
             RowBox[{
              RowBox[{"Inset", "[", 
               RowBox[{"\"\<\\<\\\"?\\\"\\>\>\"", ",", " ", 
                RowBox[{"{", 
                 RowBox[{"0.01", ",", " ", "0"}], "}"}]}], "]"}], ",", " ", 
              "\"\<Label\>\"", ",", "\n", "                    ", 
              RowBox[{"FontSize", "->", "11"}]}], "]"}]}], "}"}]}], "}"}], 
        ",", "\n", "                   ", 
        RowBox[{"ImageSize", "->", 
         RowBox[{"{", 
          RowBox[{"20", ",", " ", "20"}], "}"}]}], ",", 
        RowBox[{"BaselinePosition", "\[Rule]", "Bottom"}]}], "]"}], ",", " ", 
      "HelpMenuContents", ",", "\n", "                  ", 
      RowBox[{"Appearance", "->", "None"}], ",", "\n", "                  ", 
      RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", "\n", 
      "                  ", 
      RowBox[{"FrameMargins", "->", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"-", "2"}], ",", " ", 
           RowBox[{"-", "2"}]}], "}"}]}], "}"}]}], ",", "\n", 
      "                  ", 
      RowBox[{"ImageSize", "->", 
       RowBox[{"{", 
        RowBox[{"20", ",", " ", "20"}], "}"}]}]}], "]"}], ",", 
    "\"\<Help for working with xAct\>\""}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["pastebutton function", "Subsubsection"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", "Diff", "]"}], ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{"ToExpression", "@", 
       RowBox[{"RowBox", "[", 
        RowBox[{"{", "\n", "  ", 
         RowBox[{"\"\<d\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
          RowBox[{"TagBox", "[", "\n", "      ", 
           RowBox[{
            RowBox[{"FrameBox", "[", "\"\<form\>\"", "]"}], ",", "\n", 
            "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", "\"\<]\>\""}],
          "}"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"TagBox", "[", "\n", "      ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", "\n", "  ", 
            RowBox[{"\"\<d\>\"", ",", " ", "\n", "  ", 
             RowBox[{"RowBox", "[", 
              RowBox[{"{", 
               RowBox[{"\"\<(\>\"", ",", 
                RowBox[{"TagBox", "[", "\n", "      ", 
                 RowBox[{
                  RowBox[{"FrameBox", "[", "\"\<form\>\"", "]"}], ",", "\n", 
                  "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                "\"\<)\>\""}], "}"}], "]"}]}], "}"}], "]"}], ",", "\n", 
          "      ", "\"\<DiffTag\>\""}], "]"}], ",", "Placeholder"}], "]"}], 
      "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", "OverDot", "]"}], ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{"ToExpression", "@", 
       RowBox[{"OverscriptBox", "[", "\n", " ", 
        RowBox[{
         RowBox[{"RowBox", "[", 
          RowBox[{"{", 
           RowBox[{"\"\<(\>\"", ",", 
            RowBox[{"TagBox", "[", "\n", "      ", 
             RowBox[{
              RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
              "      ", "\"\<Placeholder\>\""}], "]"}], ",", "\"\<)\>\""}], 
           "}"}], "]"}], " ", ",", " ", "\"\<.\>\""}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"OverscriptBox", "[", "\n", " ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", 
            RowBox[{"\"\<(\>\"", ",", 
             RowBox[{"TagBox", "[", "\n", "      ", 
              RowBox[{
               RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
               "      ", "\"\<Placeholder\>\""}], "]"}], ",", "\"\<)\>\""}], 
            "}"}], "]"}], " ", ",", " ", "\"\<.\>\""}], "]"}], ",", 
        "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", 
    RowBox[{"ParamD", "/;", 
     RowBox[{"paramchoice", "=!=", "\"\<\>\""}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{"ToExpression", "@", 
       RowBox[{"RowBox", "[", 
        RowBox[{"{", "\n", "  ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", 
            RowBox[{"\"\<ParamD\>\"", ",", " ", "\"\<[\>\"", ",", 
             RowBox[{"ToString", "@", " ", "paramchoice"}], ",", " ", 
             "\"\<]\>\""}], "}"}], "]"}], ",", " ", "\"\<[\>\"", ",", " ", 
          RowBox[{"TagBox", "[", "\n", "      ", 
           RowBox[{
            RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
            "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", "\"\<]\>\""}],
          "}"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"RowBox", "[", 
         RowBox[{"{", "\n", "  ", 
          RowBox[{
           RowBox[{"RowBox", "[", 
            RowBox[{"{", 
             RowBox[{"\"\<ParamD\>\"", ",", " ", "\"\<[\>\"", ",", 
              RowBox[{"ToString", "@", " ", "paramchoice"}], ",", " ", 
              "\"\<]\>\""}], "}"}], "]"}], ",", " ", "\"\<[\>\"", ",", " ", 
           RowBox[{"TagBox", "[", "\n", "      ", 
            RowBox[{
             RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
             "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
           "\"\<]\>\""}], "}"}], "]"}], ",", "Placeholder"}], "]"}], 
      "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], "\n", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", "LieD", "]"}], ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{"ToExpression", "@", 
       RowBox[{"TagBox", "[", "\n", "      ", 
        RowBox[{
         RowBox[{"RowBox", "[", 
          RowBox[{"{", "\n", "  ", 
           RowBox[{
            RowBox[{"SubscriptBox", "[", 
             RowBox[{"\"\<\[ScriptCapitalL]\>\"", ",", " ", "\n", "   ", 
              RowBox[{"TagBox", "[", "\n", "      ", 
               RowBox[{
                RowBox[{"FrameBox", "[", "\"\<v\>\"", "]"}], ",", "\n", 
                "      ", "\"\<Placeholder\>\""}], "]"}]}], "]"}], ",", " ", 
            "\n", "  ", 
            RowBox[{"RowBox", "[", 
             RowBox[{"{", 
              RowBox[{"\"\<(\>\"", ",", 
               RowBox[{"TagBox", "[", "\n", "      ", 
                RowBox[{
                 RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
                 "      ", "\"\<Placeholder\>\""}], "]"}], ",", "\"\<)\>\""}],
               "}"}], "]"}]}], "}"}], "]"}], ",", "\n", "      ", 
         "\"\<LieTag\>\""}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"TagBox", "[", "\n", "      ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", "\n", "  ", 
            RowBox[{
             RowBox[{"SubscriptBox", "[", 
              RowBox[{
               RowBox[{"StyleBox", "[", 
                RowBox[{"LieDSymbol", ",", 
                 RowBox[{"FontColor", "\[Rule]", "Black"}]}], "]"}], ",", " ",
                "\n", "   ", 
               RowBox[{"TagBox", "[", " ", 
                RowBox[{
                 RowBox[{"FrameBox", "[", "\"\<v\>\"", "]"}], ",", "\n", 
                 "      ", "\"\<Placeholder\>\""}], "]"}]}], "]"}], ",", " ", 
             "\n", "  ", 
             RowBox[{"RowBox", "[", 
              RowBox[{"{", 
               RowBox[{"\"\<(\>\"", ",", 
                RowBox[{"TagBox", "[", "\n", "      ", 
                 RowBox[{
                  RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n",
                   "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                "\"\<)\>\""}], "}"}], "]"}]}], "}"}], "]"}], ",", "\n", 
          "      ", "\"\<LieTag\>\""}], "]"}], ",", "Placeholder"}], "]"}], 
      "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pastebutton", "[", 
   RowBox[{"Bracket", "/;", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"cup", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{"Button", "[", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Bracket", "[", 
        RowBox[{
         RowBox[{"ToExpression", "@", 
          RowBox[{"TagBox", "[", "\n", "      ", 
           RowBox[{
            RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
            "      ", "\"\<Placeholder\>\""}], "]"}]}], ",", 
         RowBox[{"ToExpression", "@", 
          RowBox[{"TagBox", "[", "\n", "      ", 
           RowBox[{
            RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
            "      ", "\"\<Placeholder\>\""}], "]"}]}]}], "]"}], "[", 
       RowBox[{"cidx", "[", "1", "]"}], "]"}], "//", "DisplayForm"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"NotebookWrite", "[", 
      RowBox[{"nb", ",", 
       RowBox[{"TagBox", "[", "\n", "      ", 
        RowBox[{
         RowBox[{"SuperscriptBox", "[", "\n", "    ", 
          RowBox[{
           RowBox[{"RowBox", "[", 
            RowBox[{"{", 
             RowBox[{"\"\<[\>\"", ",", " ", "\n", "     ", 
              RowBox[{"TagBox", "[", "\n", "      ", 
               RowBox[{
                RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
                "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
              "\"\<,\>\"", ",", " ", "\n", "     ", 
              RowBox[{"TagBox", "[", "\n", "      ", 
               RowBox[{
                RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
                "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
              "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
           RowBox[{"StyleBox", "[", 
            RowBox[{
             RowBox[{"ToString", "[", 
              RowBox[{"cup", "[", "1", "]"}], "]"}], ",", 
             RowBox[{"BasisColor", "[", 
              RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
          "]"}], ",", "\n", "      ", 
         RowBox[{"BracketTagUp", "[", 
          RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}], ",", 
       "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
     RowBox[{"ImageSize", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"im", ",", "45"}], "}"}]}], ",", 
     RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
     RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], 
   "&"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", 
    RowBox[{"Bracket", "/;", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"cdown", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], "]"}], 
   ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Bracket", "[", 
         RowBox[{
          RowBox[{"ToExpression", "@", 
           RowBox[{"TagBox", "[", "\n", "      ", 
            RowBox[{
             RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
             "      ", "\"\<Placeholder\>\""}], "]"}]}], ",", 
          RowBox[{"ToExpression", "@", 
           RowBox[{"TagBox", "[", "\n", "      ", 
            RowBox[{
             RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
             "      ", "\"\<Placeholder\>\""}], "]"}]}]}], "]"}], "[", 
        RowBox[{"cidx", "[", "1", "]"}], "]"}], "//", "DisplayForm"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"TagBox", "[", "\n", "      ", 
         RowBox[{
          RowBox[{"SubscriptBox", "[", "\n", "    ", 
           RowBox[{
            RowBox[{"RowBox", "[", 
             RowBox[{"{", 
              RowBox[{"\"\<[\>\"", ",", " ", "\n", "     ", 
               RowBox[{"TagBox", "[", "\n", "      ", 
                RowBox[{
                 RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
                 "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
               "\"\<,\>\"", ",", " ", "\n", "     ", 
               RowBox[{"TagBox", "[", "\n", "      ", 
                RowBox[{
                 RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
                 "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
               "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
            RowBox[{"StyleBox", "[", 
             RowBox[{
              RowBox[{"ToString", "[", 
               RowBox[{"cdown", "[", "1", "]"}], "]"}], ",", 
              RowBox[{"BasisColor", "[", 
               RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
           "]"}], ",", "\n", "      ", 
          RowBox[{"BracketTagDown", "[", 
           RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}], ",", 
        "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"OLD", " ", "Bracket"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"pastebutton", "[", 
     RowBox[{"Bracket", "/;", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"cup", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], "]"}], ":=", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Button", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Bracket", "[", 
            RowBox[{"cidx", "[", "1", "]"}], "]"}], "[", 
           RowBox[{
            RowBox[{"ToExpression", "@", 
             RowBox[{"TagBox", "[", "\n", "      ", 
              RowBox[{
               RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
               "      ", "\"\<Placeholder\>\""}], "]"}]}], ",", 
            RowBox[{"ToExpression", "@", 
             RowBox[{"TagBox", "[", "\n", "      ", 
              RowBox[{
               RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
               "      ", "\"\<Placeholder\>\""}], "]"}]}]}], "]"}], "//", 
          "DisplayForm"}], ",", "\[IndentingNewLine]", 
         RowBox[{"NotebookWrite", "[", 
          RowBox[{"nb", ",", 
           RowBox[{"TagBox", "[", "\n", "      ", 
            RowBox[{
             RowBox[{"SuperscriptBox", "[", "\n", "    ", 
              RowBox[{
               RowBox[{"RowBox", "[", 
                RowBox[{"{", 
                 RowBox[{"\"\<[\>\"", ",", " ", "\n", "     ", 
                  RowBox[{"TagBox", "[", "\n", "      ", 
                   RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                  "\"\<,\>\"", ",", " ", "\n", "     ", 
                  RowBox[{"TagBox", "[", "\n", "      ", 
                   RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                  "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
               RowBox[{"StyleBox", "[", 
                RowBox[{
                 RowBox[{"ToString", "[", 
                  RowBox[{"cup", "[", "1", "]"}], "]"}], ",", 
                 RowBox[{"BasisColor", "[", 
                  RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
              "]"}], ",", "\n", "      ", 
             RowBox[{"BracketTagUp", "[", 
              RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}], ",", 
           "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
         RowBox[{"ImageSize", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"im", ",", "45"}], "}"}]}], ",", 
         RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
         RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}], 
      "\[IndentingNewLine]", 
      RowBox[{"pastebutton", "[", 
       RowBox[{"Bracket", "/;", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"cdown", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], 
       "]"}]}], ":=", 
     RowBox[{
      RowBox[{"Button", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Bracket", "[", 
           RowBox[{"cidx", "[", "1", "]"}], "]"}], "[", 
          RowBox[{
           RowBox[{"ToExpression", "@", 
            RowBox[{"TagBox", "[", "\n", "      ", 
             RowBox[{
              RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n", 
              "      ", "\"\<Placeholder\>\""}], "]"}]}], ",", 
           RowBox[{"ToExpression", "@", 
            RowBox[{"TagBox", "[", "\n", "      ", 
             RowBox[{
              RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n", 
              "      ", "\"\<Placeholder\>\""}], "]"}]}]}], "]"}], "//", 
         "DisplayForm"}], ",", "\[IndentingNewLine]", 
        RowBox[{"NotebookWrite", "[", 
         RowBox[{"nb", ",", 
          RowBox[{"TagBox", "[", "\n", "      ", 
           RowBox[{
            RowBox[{"SubscriptBox", "[", "\n", "    ", 
             RowBox[{
              RowBox[{"RowBox", "[", 
               RowBox[{"{", 
                RowBox[{"\"\<[\>\"", ",", " ", "\n", "     ", 
                 RowBox[{"TagBox", "[", "\n", "      ", 
                  RowBox[{
                   RowBox[{"FrameBox", "[", "\"\<vect1\>\"", "]"}], ",", "\n",
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                 "\"\<,\>\"", ",", " ", "\n", "     ", 
                 RowBox[{"TagBox", "[", "\n", "      ", 
                  RowBox[{
                   RowBox[{"FrameBox", "[", "\"\<vect2\>\"", "]"}], ",", "\n",
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                 "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
              RowBox[{"StyleBox", "[", 
               RowBox[{
                RowBox[{"ToString", "[", 
                 RowBox[{"cdown", "[", "1", "]"}], "]"}], ",", 
                RowBox[{"BasisColor", "[", 
                 RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
             "]"}], ",", "\n", "      ", 
            RowBox[{"BracketTagDown", "[", 
             RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}], ",", 
          "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"ImageSize", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"im", ",", "45"}], "}"}]}], ",", 
        RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
        RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}]}], 
   "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pastebutton", "[", 
   RowBox[{
    RowBox[{"cdchoice_", "?", "CovDQ"}], "/;", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"cdown", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], "]"}], ":=", 
  RowBox[{
   RowBox[{"Button", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{"cdchoice", "@", 
        RowBox[{"cidx", "[", "1", "]"}]}], ")"}], "[", 
      RowBox[{"ToExpression", "@", 
       RowBox[{"TagBox", "[", "\n", "      ", 
        RowBox[{
         RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
         "      ", "\"\<Placeholder\>\""}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"NotebookWrite", "[", 
      RowBox[{"nb", ",", 
       RowBox[{"TagBox", "[", "\n", "      ", 
        RowBox[{
         RowBox[{"RowBox", "[", 
          RowBox[{"{", "\n", "    ", 
           RowBox[{
            RowBox[{"SubscriptBox", "[", 
             RowBox[{
              RowBox[{"Last", "@", 
               RowBox[{"SymbolOfCovD", "[", "cdchoice", "]"}]}], ",", " ", 
              RowBox[{"StyleBox", "[", 
               RowBox[{
                RowBox[{"ToString", "[", 
                 RowBox[{"cdown", "[", "1", "]"}], "]"}], ",", 
                RowBox[{"BasisColor", "[", 
                 RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
             "]"}], ",", " ", "\n", "    ", 
            RowBox[{"RowBox", "[", 
             RowBox[{"{", 
              RowBox[{"\"\<(\>\"", ",", 
               RowBox[{"TagBox", "[", "\n", "      ", 
                RowBox[{
                 RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
                 "      ", "\"\<Placeholder\>\""}], "]"}], ",", "\"\<)\>\""}],
               "}"}], "]"}]}], "}"}], "]"}], ",", "\n", "      ", 
         RowBox[{"StringTagPrefixDown", "[", 
          RowBox[{"cdchoice", ",", 
           RowBox[{"cbasischoice", "[", "1", "]"}]}], "]"}]}], "]"}], ",", 
       "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
     RowBox[{"ImageSize", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"im", ",", "45"}], "}"}]}], ",", 
     RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
     RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], 
   "&"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pastebutton", "[", 
    RowBox[{
     RowBox[{"cdchoice_", "?", "CovDQ"}], "/;", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"cup", "[", "1", "]"}], "=!=", "\"\<\>\""}], ")"}]}], "]"}], ":=", 
   RowBox[{
    RowBox[{"Button", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"cdchoice", "@", 
         RowBox[{"cidx", "[", "1", "]"}]}], ")"}], "[", 
       RowBox[{"ToExpression", "@", 
        RowBox[{"TagBox", "[", "\n", "      ", 
         RowBox[{
          RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n", 
          "      ", "\"\<Placeholder\>\""}], "]"}]}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"NotebookWrite", "[", 
       RowBox[{"nb", ",", 
        RowBox[{"TagBox", "[", "\n", "      ", 
         RowBox[{
          RowBox[{"RowBox", "[", 
           RowBox[{"{", "\n", "    ", 
            RowBox[{
             RowBox[{"SuperscriptBox", "[", 
              RowBox[{
               RowBox[{"Last", "@", 
                RowBox[{"SymbolOfCovD", "[", "cdchoice", "]"}]}], ",", " ", 
               RowBox[{"StyleBox", "[", 
                RowBox[{
                 RowBox[{"ToString", "[", 
                  RowBox[{"cup", "[", "1", "]"}], "]"}], ",", 
                 RowBox[{"BasisColor", "[", 
                  RowBox[{"cbasischoice", "[", "1", "]"}], "]"}]}], "]"}]}], 
              "]"}], ",", " ", "\n", "    ", 
             RowBox[{"RowBox", "[", 
              RowBox[{"{", 
               RowBox[{"\"\<(\>\"", ",", 
                RowBox[{"TagBox", "[", "\n", "      ", 
                 RowBox[{
                  RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", "\n",
                   "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                "\"\<)\>\""}], "}"}], "]"}]}], "}"}], "]"}], ",", "\n", 
          "      ", 
          RowBox[{"StringTagPrefixUp", "[", 
           RowBox[{"cdchoice", ",", 
            RowBox[{"cbasischoice", "[", "1", "]"}]}], "]"}]}], "]"}], ",", 
        "Placeholder"}], "]"}], "\[IndentingNewLine]", ",", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"im", ",", "45"}], "}"}]}], ",", 
      RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
      RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], "&"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"In", " ", "all", " ", "other", " ", "cases"}], ",", " ", 
    RowBox[{"PasteButton", " ", "works", " ", "well"}], ",", " ", 
    RowBox[{
    "since", " ", "we", " ", "are", " ", "pasting", " ", "a", " ", "complete",
      " ", "expresssion", " ", "or", " ", "an", " ", "incomplete", " ", 
     "one"}], ",", " ", 
    RowBox[{
    "but", " ", "already", " ", "taken", " ", "care", " ", "of", " ", "with", 
     " ", "pasteexpr"}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pastebutton", "[", "cdchoice_", "]"}], ":=", 
  RowBox[{
   RowBox[{"Tooltip", "[", 
    RowBox[{
     RowBox[{"PasteButton", "[", 
      RowBox[{"nb", ",", "\[IndentingNewLine]", "#", ",", "#", ",", 
       RowBox[{"ImageSize", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"im", ",", "45"}], "}"}]}], ",", 
       RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
       RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], ",", 
     "\"\<PasteButton\>\""}], "]"}], "&"}]}]}], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Splash screen", "Subsubsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"DisplaySplash", "[", "t_", "]"}], ":=", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"splashnb", "=", 
     RowBox[{"CreateWindow", "[", 
      RowBox[{
       RowBox[{"DocumentNotebook", "[", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"TextCell", "[", 
           RowBox[{
           "\"\<xPrint for xAct\>\"", ",", " ", "\"\<Title\>\"", ",", " ", 
            RowBox[{"TextAlignment", "->", "Center"}], ",", 
            RowBox[{"FontColor", "\[Rule]", "White"}], ",", 
            RowBox[{"FontSlant", "\[Rule]", "Italic"}]}], "]"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"TextCell", "[", 
           RowBox[{
            RowBox[{"\"\<Version \>\"", "<>", 
             RowBox[{"First", "@", "xAct`xPrint`$Version"}]}], ",", 
            "\"\<Subtitle\>\"", ",", 
            RowBox[{"TextAlignment", "\[Rule]", "Center"}], ",", 
            RowBox[{"FontColor", "\[Rule]", "White"}]}], "]"}], ",", 
          RowBox[{"TextCell", "[", 
           RowBox[{
           "\"\<created\\n by\\nAlessandro Stecchina\>\"", ",", 
            "\"\<Subtitle\>\"", ",", 
            RowBox[{"TextAlignment", "\[Rule]", "Center"}], ",", 
            RowBox[{"FontColor", "\[Rule]", "White"}]}], "]"}], ",", 
          RowBox[{"TextCell", "[", 
           RowBox[{
            RowBox[{"\"\<Copyright (C) 2009-\>\"", "<>", 
             RowBox[{"DateString", "[", "\"\<Year\>\"", "]"}], "<>", 
             "\"\< by Alessandro Stecchina\\nunder the General Public License\
\\n\nThese packages come with ABSOLUTELY NO WARRANTY;\\n for details type \
Disclaimer[]. This is free software, and you are welcome to redistribute it \
under certain conditions. See the General Public License for details.\>\""}], 
            ",", "\"\<Section\>\"", ",", 
            RowBox[{"FontColor", "\[Rule]", "White"}]}], "]"}]}], 
         RowBox[{"(*", 
          RowBox[{",", 
           RowBox[{"Style", "[", 
            RowBox[{
             RowBox[{"DefaultButton", "[", "]"}], ",", 
             RowBox[{"TextAlignment", "\[Rule]", "Center"}]}], "]"}]}], 
          "*)"}], "}"}], "]"}], ",", 
       RowBox[{"ShowCellBracket", "\[Rule]", "False"}], ",", 
       RowBox[{"Deployed", "\[Rule]", "True"}], ",", 
       RowBox[{"ShowGroupOpener", "\[Rule]", "False"}], ",", 
       RowBox[{"WindowSize", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"752", ",", "600"}], "}"}]}], ",", 
       RowBox[{"WindowMovable", "\[Rule]", "False"}], ",", " ", 
       RowBox[{"WindowElements", "\[Rule]", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"WindowFrame", "\[Rule]", "\"\<ThinFrame\>\""}], ",", 
       RowBox[{"Background", "\[Rule]", "Black"}], ",", 
       RowBox[{
       "WindowTitle", "\[Rule]", "\"\<Splash and Copyright Notice\>\""}]}], 
      RowBox[{"(*", 
       RowBox[{",", 
        RowBox[{"StyleDefinitions", "\[Rule]", 
         RowBox[{"FrontEnd`FileName", "[", 
          RowBox[{
           RowBox[{"{", "\"\<Creative\>\"", "}"}], ",", 
           "\"\<PastelColor.nb\>\"", ",", 
           RowBox[{"CharacterEncoding", "\[Rule]", "\"\<WindowsANSI\>\""}]}], 
          "]"}]}]}], "*)"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Pause", "[", "t", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"NotebookClose", "[", "splashnb", "]"}], ";"}], ")"}]}]], "Input",
 
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Manifold Menu", "Subsubsection"],

Cell[BoxData[
 RowBox[{"ManifoldMenu", ":=", 
  RowBox[{"Item", "[", 
   RowBox[{
    RowBox[{"Dynamic", "[", 
     RowBox[{
      RowBox[{"Tooltip", "[", 
       RowBox[{
        RowBox[{"PopupMenu", "[", 
         RowBox[{
          RowBox[{"Dynamic", "[", "manifold", "]"}], ",", 
          RowBox[{"Union", "@", "$Manifolds"}], ",", 
          RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
          RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", 
          RowBox[{"Appearance", "\[Rule]", "ActionMenu"}], ",", 
          RowBox[{"ImageSize", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
          RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], ",", 
        "\"\<Manifold Menu\>\""}], "]"}], ",", 
      RowBox[{"UpdateInterval", "\[Rule]", "5"}]}], " ", "]"}], ",", 
    RowBox[{"Alignment", "\[Rule]", "Center"}]}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Tensor Manipulation section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"TensorManipulationsection", " ", ":=", 
  RowBox[{"Grid", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"Row", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Item", "[", 
           RowBox[{
            RowBox[{"Style", "[", 
             RowBox[{"\"\<   Tensor Manipulation   \>\"", ",", "13"}], 
             RowBox[{"(*", 
              RowBox[{",", "Bold"}], "*)"}], "]"}], ",", 
            RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
          RowBox[{"Tooltip", "[", 
           RowBox[{
            RowBox[{"Row", "[", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"Checkbox", "[", 
                RowBox[{"Dynamic", "[", "SimpleManipulationQ", "]"}], "]"}], 
               ",", 
               RowBox[{"Style", "[", 
                RowBox[{"\"\< Simple \>\"", ",", "10"}], 
                RowBox[{"(*", 
                 RowBox[{",", "Bold"}], "*)"}], "]"}]}], "}"}], "]"}], ",", 
            "\"\<Simple or complex (with options) manipulation\>\""}], "]"}], 
          ",", "\"\<   \>\"", ",", 
          RowBox[{"Tooltip", "[", 
           RowBox[{
            RowBox[{"ButtonBar", "[", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"\"\< + \>\"", "\[RuleDelayed]", 
                RowBox[{"NotebookWrite", "[", 
                 RowBox[{"nb", ",", 
                  RowBox[{"Cell", "[", 
                   RowBox[{"\"\< + \>\"", ",", " ", "\"\<Input\>\""}], "]"}], 
                  ",", "After"}], "]"}]}], ",", 
               RowBox[{"\"\< - \>\"", "\[RuleDelayed]", 
                RowBox[{"NotebookWrite", "[", 
                 RowBox[{"nb", ",", 
                  RowBox[{"Cell", "[", 
                   RowBox[{"\"\< - \>\"", ",", " ", "\"\<Input\>\""}], "]"}], 
                  ",", "After"}], "]"}]}], ",", 
               RowBox[{"\"\< \[Wedge] \>\"", "\[RuleDelayed]", 
                RowBox[{"NotebookWrite", "[", 
                 RowBox[{"nb", ",", 
                  RowBox[{"Cell", "[", 
                   RowBox[{"\"\< \[Wedge] \>\"", ",", " ", "\"\<Input\>\""}], 
                   "]"}], ",", "After"}], "]"}]}]}], "}"}], "]"}], ",", 
            "\"\<Algebraic operations\>\""}], "]"}]}], "}"}], "]"}], "}"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Dynamic", "@", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<//ToCanonical\>\"", "//", "ButtonLabelStyle"}], ",",
              "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{
              "SimpleManipulationQ", ",", "\[IndentingNewLine]", "True", ",", 
               
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                  "\"\<//ToCanonical\>\"", ",", " ", "\"\<Input\>\""}], "]"}],
                  ",", "After"}], "]"}], ",", "False", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", "\[IndentingNewLine]", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<//\>\"", ",", " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ToCanonical\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<#\>\"", ",", " ", "\"\<,\>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<UseMetricOnVBundle\>\"", ",", " ", "\"\<\[Rule]\>\"",
                     ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\n", "        ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "         ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<All\>\"", ",", " ", "\"\</\>\"", ",", " ", 
                    "\"\<none\>\""}], "}"}], "]"}], ",", " ", "\"\</\>\"", 
                    ",", " ", "\"\<VBundleList\>\""}], "}"}], "]"}], "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ExpandChristoffel\>\"", ",", " ", "\"\<\[Rule]\>\"", 
                    ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<False/True\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Method\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<ChangeCovD/Implode\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], ",", " ", "\"\<&\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", "85"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Background", "->", 
              RowBox[{"Switch", "[", 
               RowBox[{
               "SimpleManipulationQ", ",", "True", ",", "Automatic", ",", 
                "False", ",", "Yellow"}], "]"}]}]}], "]"}], ",", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<//ContractBasis\>\"", "//", "ButtonLabelStyle"}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{
              "SimpleManipulationQ", ",", "\[IndentingNewLine]", "True", ",", 
               
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                  "\"\<//ContractBasis\>\"", ",", " ", "\"\<Input\>\""}], 
                  "]"}], ",", "After"}], "]"}], ",", "False", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", "\[IndentingNewLine]", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<//\>\"", ",", "\"\<ContractBasis\>\"", ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    "\"\<#\>\"", ",", " ", "\"\<,\>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<indices\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<OverDerivatives\>\"", ",", " ", "\"\<\[Rule]\>\"", 
                    ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<False/True\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\"", ",", "\"\<&\>\""}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", "85"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Background", "->", 
              RowBox[{"Switch", "[", 
               RowBox[{
               "SimpleManipulationQ", ",", "True", ",", "Automatic", ",", 
                "False", ",", "Yellow"}], "]"}]}]}], "]"}], ",", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<//ContractMetric\>\"", "//", "ButtonLabelStyle"}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{
              "SimpleManipulationQ", ",", "\[IndentingNewLine]", "True", ",", 
               
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                  "\"\<//ContractMetric\>\"", ",", " ", "\"\<Input\>\""}], 
                  "]"}], ",", "After"}], "]"}], ",", "False", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", "\[IndentingNewLine]", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<//\>\"", ",", " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ContractMetric\>\"", ",", " ", "\"\<[\>\"", ",", " ",
                     "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<#\>\"", ",", " ", "\"\<,\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<metric\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<AllowUpperDerivatives\>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<False/True\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<OverDerivatives\>\"", ",", " ", "\"\<\[Rule]\>\"", 
                    ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<False/True\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], ",", " ", "\"\<&\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", "85"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Background", "->", 
              RowBox[{"Switch", "[", 
               RowBox[{
               "SimpleManipulationQ", ",", "True", ",", "Automatic", ",", 
                "False", ",", "Yellow"}], "]"}]}]}], "]"}]}], "}"}], "]"}]}], 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Dynamic", "@", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<//Simplification\>\"", "//", "ButtonLabelStyle"}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{
              "SimpleManipulationQ", ",", "\[IndentingNewLine]", "True", ",", 
               
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                  "\"\<//Simplification\>\"", ",", " ", "\"\<Input\>\""}], 
                  "]"}], ",", "After"}], "]"}], ",", "False", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", "\[IndentingNewLine]", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<//\>\"", ",", " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Simplification\>\"", ",", " ", "\"\<[\>\"", ",", " ",
                     "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<#\>\"", ",", " ", "\"\<,\>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<UseMetricOnVBundle\>\"", ",", " ", "\"\<\[Rule]\>\"",
                     ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\n", "        ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "         ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<All\>\"", ",", " ", "\"\</\>\"", ",", " ", 
                    "\"\<none\>\""}], "}"}], "]"}], ",", " ", "\"\</\>\"", 
                    ",", " ", "\"\<VBundleList\>\""}], "}"}], "]"}], "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ExpandChristoffel\>\"", ",", " ", "\"\<\[Rule]\>\"", 
                    ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<False/True\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Method\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<ChangeCovD/Implode\>\"", "]"}], ",",
                     "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], ",", " ", "\"\<&\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", "85"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Background", "->", 
              RowBox[{"Switch", "[", 
               RowBox[{
               "SimpleManipulationQ", ",", "True", ",", "Automatic", ",", 
                "False", ",", "Yellow"}], "]"}]}]}], "]"}], ",", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<//SeparateBasis\>\"", "//", "ButtonLabelStyle"}], 
             ",", "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{
              "SimpleManipulationQ", ",", "\[IndentingNewLine]", "True", ",", 
               
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                  "\"\<//SeparateBasis\>\"", ",", " ", "\"\<Input\>\""}], 
                  "]"}], ",", "After"}], "]"}], ",", "False", ",", 
               "\[IndentingNewLine]", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", "\[IndentingNewLine]", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<//\>\"", ",", "\"\<SeparateBasis\>\"", ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "  ", 
                    RowBox[{"TagBox", "[", "\n", "   ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "   ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n", "  ", 
                    
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{"\"\<#\>\"", ",", " ", "\"\<,\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<indices\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\"", ",", "\"\<&\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", "85"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Background", "->", 
              RowBox[{"Switch", "[", 
               RowBox[{
               "SimpleManipulationQ", ",", "True", ",", "Automatic", ",", 
                "False", ",", "Yellow"}], "]"}]}]}], "]"}]}], "}"}], "]"}]}], 
       "}"}]}], "\[IndentingNewLine]", "}"}], ",", 
    RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["General Settings section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"GeneralSettingssection", ":=", " ", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<General Settings\>\"", ",", "13"}], 
      RowBox[{"(*", 
       RowBox[{",", "Bold"}], "*)"}], "]"}], ",", "\[IndentingNewLine]", 
     RowBox[{"Grid", "[", 
      RowBox[{
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"1", "st", " ", "line"}], " ", "*)"}], "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"$CommuteCovDsOnScalars", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"$CommuteCovDsOnScalars", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"$CommuteCovDsOnScalars", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CommuteCovDsOnScalars=True\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CommuteCovDsOnScalars=False\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Commute CovD on Scalars\>\"", ",", "10"}], 
            RowBox[{"(*", 
             RowBox[{",", "Bold"}], "*)"}], "]"}], ",", 
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"$DefInfoQ", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"$DefInfoQ", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"$DefInfoQ", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{"\"\<$DefInfoQ=True\>\"", ",", "\"\<Input\>\""}], 
                    "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{"\"\<$DefInfoQ=False\>\"", ",", "\"\<Input\>\""}],
                     "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Definition Info\>\"", ",", "10"}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"ABCOnQ", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"ABCOnQ", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"ABCOnQ", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<AutomaticBasisContractionStart[]\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<AutomaticBasisContractionStop[]\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Automatic Basis Contraction  \>\"", ",", "10"}], 
            "]"}]}], "}"}], ",", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"2", "nd", " ", "line"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"PostfixStyleQ", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"PostfixStyleQ", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"PostfixStyleQ", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CovDFormat =\\\"\\<Postfix\\>\\\"\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CovDFormat =\\\"\\<Prefix\\>\\\"\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<CovD Postfix notation\>\"", ",", "10"}], "]"}], ",", 
           
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"$UndefInfoQ", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"$UndefInfoQ", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"$UndefInfoQ", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$UndefInfoQ=True\>\"", ",", "\"\<Input\>\""}], "]"}],
                     ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$UndefInfoQ=False\>\"", ",", "\"\<Input\>\""}], 
                    "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Un-Definition Info\>\"", ",", "10"}], "]"}]}], "}"}],
          ",", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"3", "rd", " ", "line"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Column", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Dynamic", "@", 
               RowBox[{"ActionMenu", "[", 
                RowBox[{"\"\<Start\>\"", ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"(", 
                    RowBox[{"#", "\[RuleDelayed]", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"\"\<SortCovDsStart[\>\"", "<>", 
                    RowBox[{"ToString", "[", "#", "]"}], "<>", "\"\<]\>\""}], 
                    ",", "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                     ")"}]}], ")"}], "&"}], "/@", 
                  RowBox[{
                  "commderivativesmenuselection", "[", "manifold", "]"}]}], 
                 ",", 
                 RowBox[{"Appearance", "\[Rule]", "None"}]}], "]"}]}], ",", 
              RowBox[{"Dynamic", "@", 
               RowBox[{"ActionMenu", "[", 
                RowBox[{"\"\<Stop\>\"", ",", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"(", 
                    RowBox[{"#", "\[RuleDelayed]", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"\"\<SortCovDsStop[\>\"", "<>", 
                    RowBox[{"ToString", "[", "#", "]"}], "<>", "\"\<]\>\""}], 
                    ",", "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                     ")"}]}], ")"}], "&"}], "/@", 
                  RowBox[{
                  "commderivativesmenuselection", "[", "manifold", "]"}]}], 
                 ",", 
                 RowBox[{"Appearance", "\[Rule]", "None"}]}], "]"}]}]}], 
             "}"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Automatic CovD commutation\>\"", ",", "10"}], "]"}], 
           ",", 
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"IndicesScreenedQ", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"IndicesScreenedQ", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"IndicesScreenedQ", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$PrePrint=ScreenDollarIndices\>\"", ",", 
                    "\"\<Input\>\""}], "]"}], ",", "All"}], "]"}], ";", 
                    "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{"\"\<$PrePrint=.\>\"", ",", "\"\<Input\>\""}], 
                    "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Screen Dollar Indices\>\"", ",", "10"}], "]"}]}], 
          "}"}], ",", "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"4", "th", " ", "line"}], " ", "*)"}], 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
           RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
           RowBox[{"Checkbox", "[", 
            RowBox[{"Dynamic", "[", 
             RowBox[{"$CVVerbose", ",", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"$CVVerbose", "=", "#"}], ";", 
                 RowBox[{"If", "[", 
                  RowBox[{"$CVVerbose", ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CVVerbose = True\>\"", ",", "\"\<Input\>\""}], 
                    "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{"SelectionEvaluateCreateCell", "[", "nb", "]"}]}],
                    ",", 
                   RowBox[{
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    "\"\<$CVVerbose = False\>\"", ",", "\"\<Input\>\""}], 
                    "]"}], ",", "All"}], "]"}], ";", "\[IndentingNewLine]", 
                    RowBox[{
                    "SelectionEvaluateCreateCell", "[", "nb", "]"}]}]}], 
                  "]"}]}], ")"}], "&"}]}], "]"}], "]"}], ",", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Component Value verbose  \>\"", ",", "10"}], "]"}]}],
           "}"}]}], "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"5", "th", " ", "line"}], " ", "*)"}], "}"}], 
       "\[IndentingNewLine]", ",", 
       RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}]}], 
    "\[IndentingNewLine]", "}"}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Global Environment section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"GlobalEnvironmentsection", ":=", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Global Environment\>\"", ",", "13"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Column", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"PasteButton", "[", 
          RowBox[{
           RowBox[{"\"\<$ConstantSymbols\>\"", "//", "ButtonLabelStyle"}], 
           ",", 
           RowBox[{"Defer", "@", "$ConstantSymbols"}], ",", 
           RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
           RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
         RowBox[{"Row", "@", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Manifolds\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$Manifolds"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$ProductManifolds\>\"", "//", "ButtonLabelStyle"}],
               ",", 
              RowBox[{"Defer", "@", "$ProductManifolds"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}]}], "}"}]}], ",", 
         RowBox[{"Row", "@", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$VBundles\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$VBundles"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$SumVBundles\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$SumVBundles"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$CovDs\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$CovDs"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Tensors\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$Tensors"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Parameters\>\"", "//", "ButtonLabelStyle"}], ",", 
              
              RowBox[{"Defer", "@", "$Parameters"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}]}], "}"}]}], ",",
          "\[IndentingNewLine]", 
         RowBox[{"Row", "@", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Metrics\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$Metrics"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$ProductMetrics\>\"", "//", "ButtonLabelStyle"}], 
              ",", 
              RowBox[{"Defer", "@", "$ProductMetrics"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}]}], "}"}]}], ",", 
         RowBox[{"Row", "@", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Bases\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$Bases"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}], ",", 
            RowBox[{"PasteButton", "[", 
             RowBox[{
              RowBox[{"\"\<$Charts\>\"", "//", "ButtonLabelStyle"}], ",", 
              RowBox[{"Defer", "@", "$Charts"}], ",", 
              RowBox[{"Appearance", "\[Rule]", "Button"}], ",", 
              RowBox[{"ImageSize", "\[Rule]", "95"}]}], "]"}]}], "}"}]}]}], 
        "}"}], ",", "Center"}], "]"}]}], "\[IndentingNewLine]", "}"}], 
   "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Definitions section old inactive", "Subsubsection"],

Cell[BoxData[
 RowBox[{"Definitionssection", ":=", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Definitions\>\"", ",", "13"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Grid", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Manifold\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefManifold\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<dim\>\"", "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "\n", 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], 
                 "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", "After"}], 
             "]"}]}], "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{
            "\"\<Def Product Manifold\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefManifold\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def VBundle\>\"", "//", "ButtonLabelStyle"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefVBundle\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                    "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<dim\>\"", "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
               " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
          "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Parameter\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefParameter\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"TagBox", "[", "\n", "   ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<parameter\>\"", "]"}], ",", 
                    "\n", "   ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Constant Symbol\>\"", "//", "ButtonLabelStyle"}],
             ",", "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefConstantSymbol\>\"", ",", " ", "\"\<[\>\"", ",", 
                    " ", "\n", "  ", 
                    RowBox[{"TagBox", "[", "\n", "   ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<symbol\>\"", "]"}], ",", 
                    "\n", "   ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Tensor\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefTensor\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index1\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index2\>\"", "]"}], 
                    ",", "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], 
                    "\n", "     ", "}"}], "]"}], ",", " ", "\"\<]\>\""}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<parameter\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\[IndentingNewLine]", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<symmetry\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Item", "[", 
           RowBox[{
            RowBox[{"Tooltip", "[", 
             RowBox[{
              RowBox[{"Panel", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Symmetric\>\"", ",", "Small"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Symmetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<notation\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                    " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}], ",", 
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Antisymmetric\>\"", ",", "Small"}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Antisymmetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<notation\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                    " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}], ",", 
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<RiemannSymmetric\>\"", ",", "Small"}], "]"}],
                     ",", "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<RiemannSymmetric\>\"", ",", " ", "\"\<[\>\"", ",", 
                    " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p3\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p4\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<notation\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                    " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}]}], "}"}], "]"}], ",", 
                RowBox[{"FrameMargins", "\[Rule]", "1"}]}], "]"}], ",", 
              "\"\<Symmetry type\>\""}], "]"}], ",", 
            RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
          "SpanFromLeft"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def Cov. Derivative\>\"", "//", "ButtonLabelStyle"}], 
           ",", "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefCovD\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n", 
                   "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "    ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<covd\>\"", "]"}], ",", "\n",
                     "     ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<inner\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<vbundle\>\""}], "}"}], "]"}], "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<SymbolOfCovD\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<post_string\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], ",",
                     " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<pre_string\>\"", "]"}], ",",
                     "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}],
                     "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                 "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
             "After"}], "]"}]}], "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def Metric\>\"", "//", "ButtonLabelStyle"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefMetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n", 
                   "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<signdet\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "    ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<metric\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx1\>\"", "]"}], ",", "\n",
                     "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx2\>\"", "]"}], ",", "\n",
                     "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", 
                    " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<covd\>\"", "]"}], ",", "\n",
                     "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<SymbolOfCovD\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<post_string\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], ",",
                     " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<pre_string\>\"", "]"}], ",",
                     "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}],
                     "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                 "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
             "After"}], "]"}]}], "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Dynamic", "@", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<DefBasis\>\"", "//", "ButtonLabelStyle"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{"indexform", ",", "unprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], ",", 
               "primed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< Primed \[Rule] True\>\"", ",", 
                    " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], ",", 
               "doubleprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< DoublePrimed \[Rule] True\>\"", 
                    ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], "]"}], 
             ",", 
             RowBox[{"ImageSize", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"120", ",", "Automatic"}], "}"}]}]}], 
            "\[IndentingNewLine]", "]"}]}], ",", 
          RowBox[{"Item", "[", 
           RowBox[{
            RowBox[{"Tooltip", "[", 
             RowBox[{
              RowBox[{"Panel", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Red\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Red"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Red"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Magenta\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Magenta"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Magenta"}]}], "]"}], 
                   ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Green\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Green"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Green"}]}], "]"}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<D.Green\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", 
                    RowBox[{"N", "@", 
                    RowBox[{"Darker", "@", "Green"}]}]}], ",", 
                    RowBox[{"Background", "\[Rule]", 
                    RowBox[{"Darker", "@", "Green"}]}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Blue\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Blue"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Blue"}]}], "]"}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Cyan\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Cyan"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Cyan"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Purple\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Purple"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Purple"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Brown\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Brown"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Brown"}]}], "]"}], ",", 
                   
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Yellow\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Yellow"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Yellow"}]}], "]"}]}], 
                  "}"}], "]"}], ",", 
                RowBox[{"FrameMargins", "\[Rule]", "1"}]}], "]"}], ",", 
              "\"\<BasisColor\>\""}], "]"}], ",", 
            RowBox[{"Alignment", "\[Rule]", 
             RowBox[{"{", 
              RowBox[{"Left", ",", "Center"}], "}"}]}]}], "]"}], ",", 
          "SpanFromLeft"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Tooltip", "[", 
           RowBox[{
            RowBox[{"RadioButtonBar", "[", 
             RowBox[{
              RowBox[{"Dynamic", "[", "indexform", "]"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"unprimed", "\[Rule]", "\"\<a\>\""}], ",", 
                RowBox[{"primed", "\[Rule]", "\"\<a'\>\""}], ",", 
                RowBox[{"doubleprimed", "\[Rule]", "\"\<a''\>\""}]}], "}"}]}],
              "]"}], ",", "\"\<unprimed, primed, doubleprimed\>\""}], "]"}], 
          ",", "SpanFromAbove", ",", "SpanFromBoth"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Dynamic", "@", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<DefChart\>\"", "//", "ButtonLabelStyle"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{"indexform", ",", "unprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}], ",", "primed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< Primed \[Rule] True\>\""}], "}"}],
                     "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}], ",", "doubleprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< DoublePrimed \[Rule] True\>\""}], 
                    "}"}], "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], 
                    "}"}], "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], 
                 ",", "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"120", ",", "Automatic"}], "}"}]}]}], "]"}]}], ",", 
          "SpanFromAbove", ",", "SpanFromBoth"}], "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<PrintAs ->...\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<PrintAs\>\"", ",", " ", "\"\<->\>\"", ",", " ", "\n", 
                    "  ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<string/function\>\"", "]"}],
                     ",", "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], 
                   "}"}], "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], 
              ",", "After"}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
         "}"}]}], "}"}], "]"}]}], "\[IndentingNewLine]", "}"}], 
   "]"}]}]], "Input"]
}, Closed]],

Cell[CellGroupData[{

Cell["Definitions section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"Definitionssection", ":=", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Definitions\>\"", ",", "13"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Grid", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Manifold\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefManifold\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<dim\>\"", "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "\n", 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], 
                 "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", "After"}], 
             "]"}]}], "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{
            "\"\<Def Product Manifold\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefManifold\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def VBundle\>\"", "//", "ButtonLabelStyle"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefVBundle\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                    "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<dim\>\"", "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<index2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
               " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
          "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Parameter\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefParameter\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"TagBox", "[", "\n", "   ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<parameter\>\"", "]"}], ",", 
                    "\n", "   ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Constant Symbol\>\"", "//", "ButtonLabelStyle"}],
             ",", "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefConstantSymbol\>\"", ",", " ", "\"\<[\>\"", ",", 
                    " ", "\n", "  ", 
                    RowBox[{"TagBox", "[", "\n", "   ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<symbol\>\"", "]"}], ",", 
                    "\n", "   ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def Diff. Form\>\"", "//", "ButtonLabelStyle"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefDiffForm\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                   "\n", "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<Form\>\"", "]"}], ",", "\n",
                     "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index1\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index2\>\"", "]"}], 
                    ",", "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], 
                    "\n", "     ", "}"}], "]"}], ",", " ", "\"\<]\>\""}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<parameter\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\[IndentingNewLine]", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<degree\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\[IndentingNewLine]", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<symmetry\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
               " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
          "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<Def Tensor\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<DefTensor\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<tensor\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index1\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{
                    "FrameBox", "[", "\"\<\[PlusMinus] index2\>\"", "]"}], 
                    ",", "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], 
                    "\n", "     ", "}"}], "]"}], ",", " ", "\"\<]\>\""}], 
                    "}"}], "]"}], ",", " ", "\"\<,\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<parameter\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\[IndentingNewLine]", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<symmetry\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], 
           "\[IndentingNewLine]", "]"}], ",", 
          RowBox[{"Item", "[", 
           RowBox[{
            RowBox[{"Tooltip", "[", 
             RowBox[{
              RowBox[{"Panel", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Symmetric\>\"", ",", "Small"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Symmetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], "}"}], "]"}], ",", 
                    " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                    "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}], ",", 
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Antisymmetric\>\"", ",", "Small"}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<Antisymmetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", 
                    "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], 
                    RowBox[{"(*", 
                    RowBox[{
                    ",", " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<notation\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "*)"}], 
                    "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], 
                    "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", "After"}],
                     "]"}], "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}], ",", 
                   RowBox[{"Button", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<RiemannSymmetric\>\"", ",", "Small"}], "]"}],
                     ",", "\[IndentingNewLine]", 
                    RowBox[{"NotebookWrite", "[", 
                    RowBox[{"nb", ",", 
                    RowBox[{"Cell", "[", 
                    RowBox[{
                    RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<RiemannSymmetric\>\"", ",", " ", "\"\<[\>\"", ",", 
                    " ", "\n", "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p1\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p2\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p3\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<p4\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<notation\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", 
                    " ", "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], 
                    "\[IndentingNewLine]", ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Palette\>\""}]}], 
                    "]"}]}], "}"}], "]"}], ",", 
                RowBox[{"FrameMargins", "\[Rule]", "1"}]}], "]"}], ",", 
              "\"\<Symmetry type\>\""}], "]"}], ",", 
            RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
          "SpanFromLeft"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def Cov. Derivative\>\"", "//", "ButtonLabelStyle"}], 
           ",", "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefCovD\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n", 
                   "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "    ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<covd\>\"", "]"}], ",", "\n",
                     "     ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx\>\"", "]"}], ",", "\n", 
                    "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], "]"}], 
                    ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<inner\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<vbundle\>\""}], "}"}], "]"}], "]"}], ",", "\n", 
                    "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<SymbolOfCovD\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<post_string\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], ",",
                     " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<pre_string\>\"", "]"}], ",",
                     "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}],
                     "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                 "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
             "After"}], "]"}]}], "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"Button", "[", 
          RowBox[{
           RowBox[{"\"\<Def Metric\>\"", "//", "ButtonLabelStyle"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"NotebookWrite", "[", 
            RowBox[{"nb", ",", 
             RowBox[{"Cell", "[", 
              RowBox[{
               RowBox[{"BoxData", "[", "\n", " ", 
                RowBox[{"RowBox", "[", 
                 RowBox[{"{", 
                  RowBox[{
                  "\"\<DefMetric\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n", 
                   "  ", 
                   RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<signdet\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "    ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<metric\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx1\>\"", "]"}], ",", "\n",
                     "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<-\>\"", ",", " ", "\n", "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<idx2\>\"", "]"}], ",", "\n",
                     "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], ",", " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", 
                    " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<covd\>\"", "]"}], ",", "\n",
                     "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<SymbolOfCovD\>\"", ",", " ", "\"\<->\>\"", ",", " ", 
                    "\"\< \>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<post_string\>\"", "]"}], 
                    ",", "\n", "       ", "\"\<Placeholder\>\""}], "]"}], ",",
                     " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "      ", 
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<pre_string\>\"", "]"}], ",",
                     "\n", "       ", "\"\<Placeholder\>\""}], "]"}]}], "}"}],
                     "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                 "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
             "After"}], "]"}]}], "\[IndentingNewLine]", "]"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Dynamic", "@", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<DefBasis\>\"", "//", "ButtonLabelStyle"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{"indexform", ",", "unprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], ",", 
               "primed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< Primed \[Rule] True\>\"", ",", 
                    " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}], ",", 
               "doubleprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefBasis\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<basis\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<vbundle\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}]}], "}"}], 
                    "]"}], ",", "\"\<,\>\"", ",", 
                    "\"\< BasisColor \[Rule] \>\"", " ", ",", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< DoublePrimed \[Rule] True\>\"", 
                    ",", " ", "\"\<]\>\""}], "}"}], "]"}], "]"}], ",", " ", 
                   "\"\<Input\>\""}], "]"}], ",", "After"}], "]"}]}], "]"}], 
             ",", 
             RowBox[{"ImageSize", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"120", ",", "Automatic"}], "}"}]}]}], 
            "\[IndentingNewLine]", "]"}]}], ",", 
          RowBox[{"Item", "[", 
           RowBox[{
            RowBox[{"Tooltip", "[", 
             RowBox[{
              RowBox[{"Panel", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Red\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Red"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Red"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Magenta\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Magenta"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Magenta"}]}], "]"}], 
                   ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Green\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Green"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Green"}]}], "]"}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<D.Green\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", 
                    RowBox[{"N", "@", 
                    RowBox[{"Darker", "@", "Green"}]}]}], ",", 
                    RowBox[{"Background", "\[Rule]", 
                    RowBox[{"Darker", "@", "Green"}]}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Blue\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Blue"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Blue"}]}], "]"}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Cyan\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Cyan"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Cyan"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Purple\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Purple"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Purple"}]}], "]"}], ",", 
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Brown\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Brown"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Brown"}]}], "]"}], ",", 
                   
                   RowBox[{"PasteButton", "[", 
                    RowBox[{
                    RowBox[{"Style", "[", 
                    RowBox[{"\"\<Yellow\>\"", ",", "Small"}], "]"}], ",", 
                    RowBox[{"Defer", "@", "Yellow"}], ",", 
                    RowBox[{"Background", "\[Rule]", "Yellow"}]}], "]"}]}], 
                  "}"}], "]"}], ",", 
                RowBox[{"FrameMargins", "\[Rule]", "1"}]}], "]"}], ",", 
              "\"\<BasisColor\>\""}], "]"}], ",", 
            RowBox[{"Alignment", "\[Rule]", 
             RowBox[{"{", 
              RowBox[{"Left", ",", "Center"}], "}"}]}]}], "]"}], ",", 
          "SpanFromLeft"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Tooltip", "[", 
           RowBox[{
            RowBox[{"RadioButtonBar", "[", 
             RowBox[{
              RowBox[{"Dynamic", "[", "indexform", "]"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"unprimed", "\[Rule]", "\"\<a\>\""}], ",", 
                RowBox[{"primed", "\[Rule]", "\"\<a'\>\""}], ",", 
                RowBox[{"doubleprimed", "\[Rule]", "\"\<a''\>\""}]}], "}"}]}],
              "]"}], ",", "\"\<unprimed, primed, doubleprimed\>\""}], "]"}], 
          ",", "SpanFromAbove", ",", "SpanFromBoth"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Dynamic", "@", 
           RowBox[{"Button", "[", 
            RowBox[{
             RowBox[{"\"\<DefChart\>\"", "//", "ButtonLabelStyle"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Switch", "[", 
              RowBox[{"indexform", ",", "unprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}], ",", "primed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< Primed \[Rule] True\>\""}], "}"}],
                     "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], "}"}], 
                    "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], ",", 
                 "After"}], "]"}], ",", "doubleprimed", ",", 
               RowBox[{"NotebookWrite", "[", 
                RowBox[{"nb", ",", 
                 RowBox[{"Cell", "[", 
                  RowBox[{
                   RowBox[{"BoxData", "[", "\n", " ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<DefChart\>\"", ",", " ", "\"\<[\>\"", ",", " ", "\n",
                     "  ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "   ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<chart\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<manifold\>\"", "]"}], ",", 
                    "\n", "    ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber1\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"TagBox", "[", "\n", "      ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<cnumber2\>\"", "]"}], ",", 
                    "\n", "      ", "\"\<Placeholder\>\""}], "]"}]}], "}"}], 
                    "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", " ", 
                    "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{"\"\<{\>\"", ",", " ", "\n", "    ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "     ", 
                    RowBox[{
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x1\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\n", "     ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", "\n", "      ", 
                    RowBox[{
                    RowBox[{"TagBox", "[", "\n", "       ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<x2\>\"", "]"}], ",", "\n", 
                    "       ", "\"\<Placeholder\>\""}], "]"}], ",", " ", 
                    "\"\<[\>\"", ",", " ", "\"\<]\>\""}], "}"}], "]"}]}], 
                    "}"}], "]"}], ",", " ", "\"\<}\>\""}], "}"}], "]"}], ",", 
                    " ", "\"\<,\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "   ", 
                    RowBox[{"RowBox", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    "\"\<ChartColor\>\"", ",", " ", "\"\< \>\"", ",", " ", 
                    "\"\<\[Rule]\>\"", ",", " ", "\"\< \>\"", ",", " ", "\n", 
                    "    ", 
                    RowBox[{"TagBox", "[", "\n", "     ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<color\>\"", "]"}], ",", 
                    "\n", "     ", "\"\<Placeholder\>\""}], "]"}], ",", 
                    "\"\<,\>\"", ",", "\"\< DoublePrimed \[Rule] True\>\""}], 
                    "}"}], "]"}]}], "}"}], "]"}], ",", " ", "\"\<]\>\""}], 
                    "}"}], "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], 
                 ",", "After"}], "]"}]}], "]"}], "\[IndentingNewLine]", ",", 
             RowBox[{"ImageSize", "\[Rule]", 
              RowBox[{"{", 
               RowBox[{"120", ",", "Automatic"}], "}"}]}]}], "]"}]}], ",", 
          "SpanFromAbove", ",", "SpanFromBoth"}], "}"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
          RowBox[{"Button", "[", 
           RowBox[{
            RowBox[{"\"\<PrintAs ->...\>\"", "//", "ButtonLabelStyle"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"NotebookWrite", "[", 
             RowBox[{"nb", ",", 
              RowBox[{"Cell", "[", 
               RowBox[{
                RowBox[{"BoxData", "[", "\n", " ", 
                 RowBox[{"RowBox", "[", 
                  RowBox[{"{", 
                   RowBox[{
                   "\"\<PrintAs\>\"", ",", " ", "\"\<->\>\"", ",", " ", "\n", 
                    "  ", 
                    RowBox[{"TagBox", "[", "\n", "    ", 
                    RowBox[{
                    RowBox[{"FrameBox", "[", "\"\<string/function\>\"", "]"}],
                     ",", "\n", "    ", "\"\<Placeholder\>\""}], "]"}]}], 
                   "}"}], "]"}], "]"}], ",", " ", "\"\<Input\>\""}], "]"}], 
              ",", "After"}], "]"}]}], "\[IndentingNewLine]", "]"}]}], 
         "}"}]}], "}"}], "]"}]}], "\[IndentingNewLine]", "}"}], 
   "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Bases and Charts section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"BasesandChartssection", ":=", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Bases and Charts\>\"", ",", "13"}], "]"}], ",", 
     RowBox[{"Column", "[", 
      RowBox[{"{", 
       RowBox[{"Dynamic", "[", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Select", "[", 
            RowBox[{"$Bases", ",", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"VBundleOfBasis", "[", "#", "]"}], "===", 
                RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}]}], 
               ")"}], "&"}]}], "]"}], "\[Equal]", 
           RowBox[{"{", "}"}]}], ",", 
          RowBox[{"Item", "[", 
           RowBox[{"Grid", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Style", "[", 
                 RowBox[{"Tooltip", "[", 
                  RowBox[{
                   RowBox[{"Button", "[", 
                    RowBox[{"\"\<a...z\>\"", ",", 
                    RowBox[{
                    RowBox[{"basisreset", "[", "AIndex", "]"}], ";"}]}], " ", 
                    "]"}], ",", "\"\<Reset Basis Menus\>\""}], "]"}], "]"}], 
                ",", 
                RowBox[{"Style", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PasteButton", "[", " ", 
                    RowBox[{"\"\<AIndex\>\"", ",", "AIndex", ",", 
                    RowBox[{"ImageSize", "\[Rule]", "im"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], 
                    ",", "\"\<Available Basis\>\""}], "]"}], ",", "Black"}], 
                 "]"}]}], "}"}], "}"}], ",", 
             RowBox[{"Frame", "\[Rule]", "True"}], ",", 
             RowBox[{"FrameStyle", "\[Rule]", 
              RowBox[{"Directive", "[", 
               RowBox[{"Black", ",", "Thick"}], "]"}]}]}], "]"}], "]"}], ",", 
          
          RowBox[{"Grid", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"{", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Style", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"Button", "[", 
                    RowBox[{"\"\<a...z\>\"", ",", 
                    RowBox[{
                    RowBox[{"basisreset", "[", "AIndex", "]"}], ";"}]}], " ", 
                    "]"}], ",", "\"\<Reset Basis Menus\>\""}], "]"}], ",", 
                  "Black"}], "]"}], ",", 
                RowBox[{"Style", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PasteButton", "[", " ", 
                    RowBox[{"\"\<AIndex\>\"", ",", "AIndex", ",", 
                    RowBox[{"ImageSize", "\[Rule]", "im"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], 
                    ",", "\"\<Available Basis\>\""}], "]"}], ",", "Black"}], 
                 "]"}]}], "}"}], "}"}], "~", "Join", "~", 
             RowBox[{"Table", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"Style", "[", 
                  RowBox[{
                   RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"With", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"bas", "=", "i"}], "}"}], ",", 
                    RowBox[{"Button", "[", 
                    RowBox[{"\"\<a...z\>\"", ",", 
                    RowBox[{
                    RowBox[{"basisreset", "[", "bas", "]"}], ";"}]}], " ", 
                    "]"}]}], "]"}], ",", "\"\<Reset Basis Menus\>\""}], "]"}],
                    ",", 
                   RowBox[{"BasisColor", "@", "i"}]}], "]"}], ",", 
                 RowBox[{"Style", "[", 
                  RowBox[{
                   RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PasteButton", "[", " ", 
                    RowBox[{
                    RowBox[{"ToString", "[", "i", "]"}], ",", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Defer", "[", "#", "]"}], "&"}], "[", "i", "]"}], 
                    ",", 
                    RowBox[{"ImageSize", "\[Rule]", "im"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], 
                    ",", "\"\<Available Basis\>\""}], "]"}], ",", 
                   RowBox[{"BasisColor", "@", "i"}]}], "]"}]}], 
                RowBox[{"(*", 
                 RowBox[{
                  RowBox[{"Sequence", "@@", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"PasteButton", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{
                    RowBox[{"ToExpression", "[", "#", "]"}], "//", 
                    "InputForm"}], ",", 
                    RowBox[{"ImageSize", "\[Rule]", "27"}]}], "]"}], "&"}], "/@", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"ToString", "[", "#", "]"}], "<>", "\"\<[]\>\""}],
                     ")"}], "&"}], "/@", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Coordinate", "[", 
                    RowBox[{"#", ",", " ", "i"}], "]"}], "&"}], "/@", 
                    RowBox[{"CNumbersOf", "[", "i", "]"}]}], ")"}]}], ")"}]}],
                     ")"}]}], ",", "\"\<\[DoubleLongRightArrow]\>\"", ",", 
                  RowBox[{"Sequence", "@@", 
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"PasteButton", "[", 
                    RowBox[{"#", ",", "#", ",", 
                    RowBox[{"ImageSize", "\[Rule]", "27"}]}], "]"}], "&"}], "/@", 
                    RowBox[{
                    RowBox[{"BasisArray", "[", "i", "]"}], "[", "a", "]"}]}], 
                    ")"}]}], ","}], "*)"}], "}"}], ",", 
               RowBox[{"{", 
                RowBox[{"i", ",", 
                 RowBox[{"Select", "[", 
                  RowBox[{"$Bases", ",", 
                   RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"VBundleOfBasis", "[", "#", "]"}], "===", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "&"}]}], "]"}]}], "}"}]}], "]"}]}], ",", 
            RowBox[{"Alignment", "\[Rule]", "Left"}], ",", 
            RowBox[{"Spacings", "\[Rule]", 
             RowBox[{"{", 
              RowBox[{"0", ",", "0.1"}], "}"}]}], ",", " ", 
            RowBox[{"Frame", "\[Rule]", "True"}], ",", 
            RowBox[{"FrameStyle", "\[Rule]", 
             RowBox[{"Directive", "[", 
              RowBox[{"Black", ",", "Thick"}], "]"}]}]}], "]"}]}], "]"}], 
        "]"}], "}"}], "]"}]}], "}"}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Perturbations section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"Perturbationssection", ":=", "\[IndentingNewLine]", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Perturbations\>\"", ",", "13"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Column", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"PasteButton", "[", 
          RowBox[{"\"\<Load xPert\>\"", ",", 
           RowBox[{"Defer", "@", 
            RowBox[{"(", 
             RowBox[{"<<", "xAct`xPert`"}], ")"}]}], ",", 
           RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
           RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], ",", 
         RowBox[{"Invisible", "@", "\"\<I\>\""}]}], "}"}], ",", "Center"}], 
      "]"}]}], "\[IndentingNewLine]", "}"}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["Exterior Forms section", "Subsubsection"],

Cell[BoxData[
 RowBox[{"ExteriorFormssection", ":=", "\[IndentingNewLine]", 
  RowBox[{"OpenerView", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{"\"\<Exterior Forms\>\"", ",", "13"}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Column", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"PasteButton", "[", 
          RowBox[{"\"\<Load xTerior\>\"", ",", 
           RowBox[{"Defer", "@", 
            RowBox[{"(", 
             RowBox[{"<<", "xAct`xTerior`"}], ")"}]}], ",", 
           RowBox[{"Background", "\[Rule]", " ", "LightGray"}], ",", 
           RowBox[{"Appearance", "\[Rule]", "Button"}]}], "]"}], ",", 
         RowBox[{"Invisible", "@", "\"\<I\>\""}]}], "}"}], ",", "Center"}], 
      "]"}]}], "\[IndentingNewLine]", "}"}], "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]],

Cell[CellGroupData[{

Cell["xPrint Palette", "Subsubsection"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"xPrint", " ", "Palette"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"xPrintPaletteTitle", "=", 
    RowBox[{"\"\<xPrint Palette v. \>\"", "<>", 
     RowBox[{"xAct`xPrint`$Version", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}]}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{
    "see", " ", "beginning", " ", "of", " ", "package", " ", "for", " ", 
     "version", " ", "info"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"im", "=", "135"}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{"horizontal", " ", "size", " ", "of", " ", "PasteButton"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ww", "=", "300"}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{"spacer", " ", "size"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"www", "=", 
     RowBox[{"3.1", "im"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"LockednbQ", "=", "False"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Initialize", " ", "options"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"nb", ":=", 
    RowBox[{"If", "[", 
     RowBox[{"LockednbQ", ",", "Lockednb", ",", 
      RowBox[{"InputNotebook", "[", "]"}]}], "]"}]}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"basisreset", "[", "AIndex", "]"}], ";"}], " ", 
   RowBox[{"(*", " ", 
    RowBox[{
    "initialize", " ", "the", " ", "first", " ", "10", " ", "basis", " ", 
     "indices", " ", "to", " ", "AIndex"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"cup", "[", "1", "]"}], "=", "\"\<\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"cdown", "[", "1", "]"}], "=", "\"\<\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"cbasischoice", "[", "1", "]"}], "=", "AIndex"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"manifold", "=", "\"\<\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"cdchoice", "=", "\"\<\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"paramchoice", "=", "\"\<\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"commcdchoice", "\[Equal]", "\"\<\>\""}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"tensorhead", "=", "\"\<\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gdslots", "=", "1"}], ";"}]}]}]], "Input",
 InitializationCell->True],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"--", 
   RowBox[{"--", 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}], "*)"}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Palette", " ", "contents"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"xPrintpaste", ":=", 
   RowBox[{"Grid", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Style", "[", 
               RowBox[{"\"\<   Tensor Input   \>\"", ",", "15", ",", "Bold"}],
                "]"}], ",", 
              RowBox[{"Dynamic", "@", 
               RowBox[{"(", 
                RowBox[{"Panel", "@", 
                 RowBox[{"(", 
                  RowBox[{"Row", "[", 
                   RowBox[{"{", 
                    RowBox[{"\"\<Target \>\"", ",", "\"\<\[Rule] \>\"", ",", 
                    RowBox[{"\"\<WindowTitle\>\"", "/.", 
                    RowBox[{"NotebookInformation", "[", "nb", "]"}]}]}], 
                    "}"}], "]"}], ")"}]}], ")"}]}], ",", 
              RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Checkbox", "[", 
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"LockednbQ", "=", "#"}], ";", 
                    RowBox[{"If", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{"Lockednb", "=", 
                    RowBox[{"InputNotebook", "[", "]"}]}]}], "]"}]}], ")"}], 
                    "&"}]}], "]"}], "]"}], ",", 
                   RowBox[{"Style", "[", 
                    RowBox[{"\"\< Lock\>\"", ",", "10", ",", "Bold"}], 
                    "]"}]}], "}"}], "]"}], ",", 
                "\"\<Lock current InputNotebook\>\""}], "]"}]}], "}"}], "]"}],
            ",", 
           RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"ActionMenu", "[", "\n", "                  ", 
                 RowBox[{
                  RowBox[{"Graphics", "[", 
                   RowBox[{
                    RowBox[{"{", "\n", "                    ", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"RGBColor", "[", 
                    RowBox[{
                    "0.689647", ",", " ", "0.761166", ",", " ", "0.805478"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Disk", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}]}], "}"}], ",", " ", "\n", "                    ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"GrayLevel", "[", "0", "]"}], ",", " ", 
                    RowBox[{"Circle", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Style", "[", 
                    RowBox[{
                    RowBox[{"Inset", "[", 
                    RowBox[{"\"\<\\<\\\"?\\\"\\>\>\"", ",", " ", 
                    RowBox[{"{", 
                    RowBox[{"0.01", ",", " ", "0"}], "}"}]}], "]"}], ",", 
                    " ", "\"\<Label\>\"", ",", "\n", "                    ", 
                    RowBox[{"FontSize", "->", "11"}]}], "]"}]}], "}"}]}], 
                    "}"}], ",", "\n", "                   ", 
                    RowBox[{"ImageSize", "->", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", "Bottom"}]}], 
                   "]"}], ",", " ", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"\"\<xPrint Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPrintDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCore Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCoreDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", " ", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPerm Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPermDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Doc\>\"", ":>", " ", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    " ", "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Ref. Guide\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorRefGuide.nb\>\""}], "}"}], "]"}], "]"}]}], 
                    ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCoba Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCobaDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPert Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPertDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Harmonics Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<HarmonicsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<Invar Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<InvarDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Spinors Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<SpinorsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xPrint site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://sites.google.com/site/xprintforxact/\>\"", 
                    "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://metric.iem.csic.es/Martin-Garcia/xAct/index.\
html\>\"", "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct group\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://groups.google.com/group/xact/topics?hl=en\>\"\
", "]"}]}], ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<About xPrint...\>\"", ":>", 
                    RowBox[{"DisplaySplash", "[", "5", "]"}]}]}], "}"}], ",", 
                  "\n", "                  ", 
                  RowBox[{"Appearance", "->", "None"}], ",", "\n", 
                  "                  ", 
                  RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", "\n", 
                  "                  ", 
                  RowBox[{"FrameMargins", "->", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", "2"}], ",", " ", 
                    RowBox[{"-", "2"}]}], "}"}]}], "}"}]}], ",", "\n", 
                  "                  ", 
                  RowBox[{"ImageSize", "->", 
                   RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}]}], "]"}], ",", 
                "\"\<Help for working with xAct\>\""}], "]"}], ",", 
              RowBox[{"Invisible", "[", "\"\<I\>\"", "]"}]}], "}"}], "]"}], 
           ",", 
           RowBox[{"Alignment", "\[Rule]", "Right"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Dynamic", "@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"pastebutton", "[", "cdchoice", "]"}], "[", 
              "pastedexpr", "]"}], ")"}]}], ",", "\"\<  \>\"", ",", 
           RowBox[{"Dynamic", "@", "\[IndentingNewLine]", 
            RowBox[{"Row", "[", "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", "manifold", "]"}], ",", 
                   RowBox[{"Union", "@", "$Manifolds"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                 ",", "\"\<Manifold Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"cdchoice", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"cdchoice", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdchoice", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"derivativesmenuselection", "[", "manifold", "]"}],
                    ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                 ",", "\"\<Derivative Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<up-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<down-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"FieldSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", "1"}], "}"}]}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"CovDQ", "[", "cdchoice", "]"}], "||", 
                    RowBox[{"cdchoice", "===", "Bracket"}]}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "paramchoice", "]"}], ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{"$Parameters", ",", "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<Parameter Menu\>\""}], "]"}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"cdchoice", "===", "ParamD"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"tensorhead", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"tensorhead", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"tensorhead", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"cdchoice", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"tensormenuselection", "[", "manifold", "]"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                 ",", "\"\<Tensor Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "gdslots", "]"}], ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"DimOfManifold", "[", "manifold", "]"}], "]"}], 
                    ",", 
                    RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<Gdelta slot Menu\>\""}], "]"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<up-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<down-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"FieldSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", "1"}], "}"}]}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "ActionMenu"}]}], "]"}], 
                    ",", "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"xTensorQ", "[", "tensorhead", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
                    "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"Length", "@", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], 
                    "]"}], ",", "0"}], "]"}]}], "}"}]}], 
                 "\[IndentingNewLine]", "]"}]}], ",", 
               RowBox[{"Invisible", "[", "\"\<AAA\>\"", "]"}]}], 
              "\[IndentingNewLine]", "}"}], "]"}]}]}], "}"}], "]"}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "TensorManipulationsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GeneralSettingssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GlobalEnvironmentsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Definitionssection", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "BasesandChartssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Perturbationssection", "}"}]}], "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", "}"}], ",", 
     RowBox[{"Alignment", "\[Rule]", "Left"}], ",", 
     RowBox[{"Dividers", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"False", ",", 
        RowBox[{"{", 
         RowBox[{"False", ",", "False", ",", 
          RowBox[{"{", "True", "}"}], ",", "False"}], "}"}]}], "}"}]}]}], 
    "]"}]}]}]], "Input",
 CellOpen->False],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Palette", " ", "contents"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"xPrintpaste", ":=", 
   RowBox[{"Grid", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Style", "[", 
               RowBox[{"\"\<   Tensor Input   \>\"", ",", "13"}], 
               RowBox[{"(*", 
                RowBox[{",", "Bold"}], "*)"}], "]"}], ",", 
              RowBox[{"Dynamic", "@", 
               RowBox[{"(", 
                RowBox[{"Panel", "@", 
                 RowBox[{"(", 
                  RowBox[{"Row", "[", 
                   RowBox[{"{", 
                    RowBox[{"\"\<Target \>\"", ",", "\"\<\[Rule] \>\"", ",", 
                    RowBox[{"\"\<WindowTitle\>\"", "/.", 
                    RowBox[{"NotebookInformation", "[", "nb", "]"}]}]}], 
                    "}"}], "]"}], ")"}]}], ")"}]}], ",", 
              RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Checkbox", "[", 
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"LockednbQ", "=", "#"}], ";", 
                    RowBox[{"If", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{"Lockednb", "=", 
                    RowBox[{"InputNotebook", "[", "]"}]}]}], "]"}]}], ")"}], 
                    "&"}]}], "]"}], "]"}], ",", 
                   RowBox[{"Style", "[", 
                    RowBox[{"\"\< Lock\>\"", ",", "10"}], 
                    RowBox[{"(*", 
                    RowBox[{",", "Bold"}], "*)"}], "]"}]}], "}"}], "]"}], 
                ",", "\"\<Lock current InputNotebook\>\""}], "]"}]}], "}"}], 
            "]"}], ",", 
           RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"ActionMenu", "[", "\n", "                  ", 
                 RowBox[{
                  RowBox[{"Graphics", "[", 
                   RowBox[{
                    RowBox[{"{", "\n", "                    ", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"RGBColor", "[", 
                    RowBox[{
                    "0.689647", ",", " ", "0.761166", ",", " ", "0.805478"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Disk", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}]}], "}"}], ",", " ", "\n", "                    ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"GrayLevel", "[", "0", "]"}], ",", " ", 
                    RowBox[{"Circle", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Style", "[", 
                    RowBox[{
                    RowBox[{"Inset", "[", 
                    RowBox[{"\"\<\\<\\\"?\\\"\\>\>\"", ",", " ", 
                    RowBox[{"{", 
                    RowBox[{"0.01", ",", " ", "0"}], "}"}]}], "]"}], ",", 
                    " ", "\"\<Label\>\"", ",", "\n", "                    ", 
                    RowBox[{"FontSize", "->", "11"}]}], "]"}]}], "}"}]}], 
                    "}"}], ",", "\n", "                   ", 
                    RowBox[{"ImageSize", "->", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", "Bottom"}]}], 
                   "]"}], ",", " ", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"\"\<xPrint Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPrintDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCore Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCoreDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", " ", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPerm Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPermDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Doc\>\"", ":>", " ", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    " ", "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Ref. Guide\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorRefGuide.nb\>\""}], "}"}], "]"}], "]"}]}], 
                    ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCoba Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCobaDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPert Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPertDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Harmonics Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<HarmonicsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<Invar Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<InvarDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Spinors Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<SpinorsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xPrint site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://sites.google.com/site/xprintforxact/\>\"", 
                    "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://metric.iem.csic.es/Martin-Garcia/xAct/index.\
html\>\"", "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct group\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://groups.google.com/group/xact/topics?hl=en\>\"\
", "]"}]}], ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<About xPrint...\>\"", ":>", 
                    RowBox[{"DisplaySplash", "[", "5", "]"}]}]}], "}"}], ",", 
                  "\n", "                  ", 
                  RowBox[{"Appearance", "->", "None"}], ",", "\n", 
                  "                  ", 
                  RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", "\n", 
                  "                  ", 
                  RowBox[{"FrameMargins", "->", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", "2"}], ",", " ", 
                    RowBox[{"-", "2"}]}], "}"}]}], "}"}]}], ",", "\n", 
                  "                  ", 
                  RowBox[{"ImageSize", "->", 
                   RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}]}], "]"}], ",", 
                "\"\<Help for working with xAct\>\""}], "]"}], ",", 
              RowBox[{"Invisible", "[", "\"\<I\>\"", "]"}]}], "}"}], "]"}], 
           ",", 
           RowBox[{"Alignment", "\[Rule]", "Right"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Dynamic", "@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"pastebutton", "[", "cdchoice", "]"}], "[", 
              "pastedexpr", "]"}], ")"}]}], ",", "\"\<  \>\"", ",", 
           RowBox[{"Dynamic", "@", "\[IndentingNewLine]", 
            RowBox[{"Row", "[", "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", "manifold", "]"}], ",", 
                   RowBox[{"Union", "@", "$Manifolds"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Manifold Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"cdchoice", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"cdchoice", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdchoice", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"derivativesmenuselection", "[", "manifold", "]"}],
                    ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Derivative Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"FieldSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", "1"}], "}"}]}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"CovDQ", "[", "cdchoice", "]"}], "||", 
                    RowBox[{"cdchoice", "===", "Bracket"}]}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "paramchoice", "]"}], ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{"$Parameters", ",", "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Parameter Menu\>\""}], "]"}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"cdchoice", "===", "ParamD"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"tensorhead", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"tensorhead", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"tensorhead", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"cdchoice", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"tensormenuselection", "[", "manifold", "]"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Tensor Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "gdslots", "]"}], ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"DimOfManifold", "[", "manifold", "]"}], "]"}], 
                    ",", 
                    RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Gdelta slot Menu\>\""}], "]"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", 
                    "]"}]}], ",", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"FieldSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", "1"}], "}"}]}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"xTensorQ", "[", "tensorhead", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
                    "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"Length", "@", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], 
                    "]"}], ",", "0"}], "]"}]}], "}"}]}], 
                 "\[IndentingNewLine]", "]"}]}], ",", 
               RowBox[{"Invisible", "[", "\"\<AAA\>\"", "]"}]}], 
              "\[IndentingNewLine]", "}"}], "]"}]}]}], "}"}], "]"}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "TensorManipulationsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GeneralSettingssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GlobalEnvironmentsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Definitionssection", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "BasesandChartssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Perturbationssection", "}"}]}], "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", "}"}], ",", 
     RowBox[{"Alignment", "\[Rule]", "Left"}], ",", 
     RowBox[{"Dividers", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"False", ",", 
        RowBox[{"{", 
         RowBox[{"False", ",", "False", ",", 
          RowBox[{"{", "True", "}"}], ",", "False"}], "}"}]}], "}"}]}]}], 
    "]"}]}]}]], "Input",
 CellOpen->False],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Palette", " ", "contents", " ", "without", " ", "labels"}], 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{"xPrintpaste", ":=", 
   RowBox[{"Grid", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Style", "[", 
               RowBox[{"\"\<   Tensor Input   \>\"", ",", "13"}], 
               RowBox[{"(*", 
                RowBox[{",", "Bold"}], "*)"}], "]"}], ",", 
              RowBox[{"Dynamic", "@", 
               RowBox[{"(", 
                RowBox[{"Panel", "[", 
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{"Row", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{
                    "\"\<Target \[Rule] \>\"", "//", "ButtonLabelStyle"}], 
                    ",", 
                    RowBox[{
                    RowBox[{"\"\<WindowTitle\>\"", "/.", 
                    RowBox[{"NotebookInformation", "[", "nb", "]"}]}], "//", 
                    "ButtonLabelStyle"}]}], "}"}], "]"}], ")"}], ",", 
                  RowBox[{"FrameMargins", "\[Rule]", "Tiny"}]}], "]"}], 
                ")"}]}], ",", 
              RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Checkbox", "[", 
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"LockednbQ", "=", "#"}], ";", 
                    RowBox[{"If", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{"Lockednb", "=", 
                    RowBox[{"InputNotebook", "[", "]"}]}]}], "]"}]}], ")"}], 
                    "&"}]}], "]"}], "]"}], ",", 
                   RowBox[{"Style", "[", 
                    RowBox[{"\"\< Lock\>\"", ",", "10"}], 
                    RowBox[{"(*", 
                    RowBox[{",", "Bold"}], "*)"}], "]"}]}], "}"}], "]"}], 
                ",", "\"\<Lock current InputNotebook\>\""}], "]"}]}], "}"}], 
            "]"}], ",", 
           RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"ActionMenu", "[", "\n", "                  ", 
                 RowBox[{
                  RowBox[{"Graphics", "[", 
                   RowBox[{
                    RowBox[{"{", "\n", "                    ", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"RGBColor", "[", 
                    RowBox[{
                    "0.689647", ",", " ", "0.761166", ",", " ", "0.805478"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Disk", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}]}], "}"}], ",", " ", "\n", "                    ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"GrayLevel", "[", "0", "]"}], ",", " ", 
                    RowBox[{"Circle", "[", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", "0.1"}], 
                    "]"}], ",", " ", "\n", "                    ", 
                    RowBox[{"Style", "[", 
                    RowBox[{
                    RowBox[{"Inset", "[", 
                    RowBox[{"\"\<\\<\\\"?\\\"\\>\>\"", ",", " ", 
                    RowBox[{"{", 
                    RowBox[{"0.01", ",", " ", "0"}], "}"}]}], "]"}], ",", 
                    " ", "\"\<Label\>\"", ",", "\n", "                    ", 
                    RowBox[{"FontSize", "->", "11"}]}], "]"}]}], "}"}]}], 
                    "}"}], ",", "\n", "                   ", 
                    RowBox[{"ImageSize", "->", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", "Bottom"}]}], 
                   "]"}], ",", " ", 
                  RowBox[{"{", 
                   RowBox[{
                    RowBox[{"\"\<xPrint Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPrintDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCore Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCoreDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", " ", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPerm Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPermDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Doc\>\"", ":>", " ", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    " ", "\[IndentingNewLine]", 
                    RowBox[{"\"\<xTensor Ref. Guide\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xTensorRefGuide.nb\>\""}], "}"}], "]"}], "]"}]}], 
                    ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xCoba Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xCobaDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<xPert Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<xPertDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Harmonics Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<HarmonicsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<Invar Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<InvarDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<Spinors Doc\>\"", ":>", 
                    RowBox[{"NotebookOpen", "[", 
                    RowBox[{"FileNameJoin", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"First", "@", 
                    RowBox[{"FileNames", "[", 
                    RowBox[{"\"\<xAct\>\"", ",", "$Path"}], "]"}]}], ",", 
                    "\"\<Documentation\>\"", ",", "\"\<English\>\"", ",", 
                    "\"\<SpinorsDoc.nb\>\""}], "}"}], "]"}], "]"}]}], ",", 
                    "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xPrint site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://sites.google.com/site/xprintforxact/\>\"", 
                    "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct site\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://metric.iem.csic.es/Martin-Garcia/xAct/index.\
html\>\"", "]"}]}], ",", "\[IndentingNewLine]", " ", 
                    RowBox[{"\"\<xAct group\>\"", ":>", 
                    RowBox[{
                    "SystemOpen", "[", 
                    "\"\<http://groups.google.com/group/xact/topics?hl=en\>\"\
", "]"}]}], ",", "\[IndentingNewLine]", "Delimiter", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"\"\<About xPrint...\>\"", ":>", 
                    RowBox[{"DisplaySplash", "[", "5", "]"}]}]}], "}"}], ",", 
                  "\n", "                  ", 
                  RowBox[{"Appearance", "->", "None"}], ",", "\n", 
                  "                  ", 
                  RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", "\n", 
                  "                  ", 
                  RowBox[{"FrameMargins", "->", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"0", ",", " ", "0"}], "}"}], ",", " ", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", "2"}], ",", " ", 
                    RowBox[{"-", "2"}]}], "}"}]}], "}"}]}], ",", "\n", 
                  "                  ", 
                  RowBox[{"ImageSize", "->", 
                   RowBox[{"{", 
                    RowBox[{"20", ",", " ", "20"}], "}"}]}]}], "]"}], ",", 
                "\"\<Help for working with xAct\>\""}], "]"}], ",", 
              RowBox[{"Invisible", "[", "\"\<I\>\"", "]"}]}], "}"}], "]"}], 
           ",", 
           RowBox[{"Alignment", "\[Rule]", "Right"}]}], "]"}]}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Dynamic", "@", 
            RowBox[{"Tooltip", "[", 
             RowBox[{
              RowBox[{"PopupMenu", "[", 
               RowBox[{
                RowBox[{"Dynamic", "[", "manifold", "]"}], ",", 
                RowBox[{"Union", "@", "$Manifolds"}], ",", 
                RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                RowBox[{"BaseStyle", "->", "\"\<puL\>\""}], ",", 
                RowBox[{"Appearance", "\[Rule]", "ActionMenu"}], ",", 
                RowBox[{"ImageSize", "\[Rule]", 
                 RowBox[{"{", 
                  RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], ",", 
              "\"\<Manifold Menu\>\""}], "]"}]}], ",", 
           RowBox[{"Alignment", "\[Rule]", "Center"}]}], "]"}], ",", 
         "SpanFromLeft"}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Dynamic", "@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"pastebutton", "[", "cdchoice", "]"}], "[", 
              "pastedexpr", "]"}], ")"}]}], ",", "\"\<  \>\"", ",", 
           RowBox[{"Dynamic", "@", "\[IndentingNewLine]", 
            RowBox[{"Row", "[", "\[IndentingNewLine]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"cdchoice", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"cdchoice", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdchoice", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"derivativesmenuselection", "[", "manifold", "]"}],
                    ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Derivative Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", 
                    "]"}]}], ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"CovDQ", "[", "cdchoice", "]"}], "||", 
                    RowBox[{"cdchoice", "===", "Bracket"}]}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "paramchoice", "]"}], ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{"$Parameters", ",", "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Parameter Menu\>\""}], "]"}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"cdchoice", "===", "ParamD"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"tensorhead", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"tensorhead", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"tensorhead", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"cdchoice", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"tensormenuselection", "[", "manifold", "]"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Tensor Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "gdslots", "]"}], ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"DimOfManifold", "[", "manifold", "]"}], "]"}], 
                    ",", 
                    RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Gdelta slot Menu\>\""}], "]"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", 
                    "]"}]}], ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"xTensorQ", "[", "tensorhead", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", "2", ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", "2", ",", 
                    "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"Length", "@", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], 
                    "]"}], ",", "0"}], "]"}]}], "}"}]}], 
                 "\[IndentingNewLine]", "]"}]}], ",", 
               RowBox[{"Invisible", "[", "\"\<AAA\>\"", "]"}]}], 
              "\[IndentingNewLine]", "}"}], "]"}]}]}], "}"}], "]"}], "}"}], 
       ",", ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "TensorManipulationsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GeneralSettingssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GlobalEnvironmentsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Definitionssection", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "BasesandChartssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Perturbationssection", "}"}]}], "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", "}"}], ",", 
     RowBox[{"Alignment", "\[Rule]", "Left"}], ",", 
     RowBox[{"Dividers", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"False", ",", 
        RowBox[{"{", 
         RowBox[{"False", ",", "False", ",", "False", ",", 
          RowBox[{"{", "True", "}"}], ",", "False"}], "}"}]}], "}"}]}]}], 
    "]"}]}]}]], "Input",
 CellOpen->False],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Palette", " ", "contents"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"xPrintpaste", ":=", 
   RowBox[{"Grid", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"Style", "[", 
               RowBox[{"\"\<   Tensor Input   \>\"", ",", "13"}], 
               RowBox[{"(*", 
                RowBox[{",", "Bold"}], "*)"}], "]"}], ",", 
              RowBox[{"Dynamic", "@", 
               RowBox[{"(", 
                RowBox[{"Panel", "[", 
                 RowBox[{
                  RowBox[{"(", 
                   RowBox[{"Row", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{
                    "\"\<Target \[Rule] \>\"", "//", "ButtonLabelStyle"}], 
                    ",", 
                    RowBox[{
                    RowBox[{"\"\<WindowTitle\>\"", "/.", 
                    RowBox[{"NotebookInformation", "[", "nb", "]"}]}], "//", 
                    "ButtonLabelStyle"}]}], "}"}], "]"}], ")"}], ",", 
                  RowBox[{"FrameMargins", "\[Rule]", "Tiny"}]}], "]"}], 
                ")"}]}], ",", 
              RowBox[{"Invisible", "[", "\"\<A\>\"", "]"}], ",", 
              RowBox[{"Tooltip", "[", 
               RowBox[{
                RowBox[{"Row", "[", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Checkbox", "[", 
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"LockednbQ", "=", "#"}], ";", 
                    RowBox[{"If", "[", 
                    RowBox[{"LockednbQ", ",", 
                    RowBox[{"Lockednb", "=", 
                    RowBox[{"InputNotebook", "[", "]"}]}]}], "]"}]}], ")"}], 
                    "&"}]}], "]"}], "]"}], ",", 
                   RowBox[{"Style", "[", 
                    RowBox[{"\"\< Lock\>\"", ",", "10"}], 
                    RowBox[{"(*", 
                    RowBox[{",", "Bold"}], "*)"}], "]"}]}], "}"}], "]"}], 
                ",", "\"\<Lock current InputNotebook\>\""}], "]"}]}], "}"}], 
            "]"}], ",", 
           RowBox[{"Alignment", "\[Rule]", "Left"}]}], "]"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{"Help", " ", "Menu"}], " ", "*)"}], "\[IndentingNewLine]", 
         RowBox[{"Item", "[", 
          RowBox[{
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{"HelpMenu", ",", 
              RowBox[{"Invisible", "[", "\"\<I\>\"", "]"}]}], "}"}], "]"}], 
           ",", 
           RowBox[{"Alignment", "\[Rule]", "Right"}]}], "]"}]}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"Manifold", " ", "Menu"}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"ManifoldMenu", ",", "SpanFromLeft"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "-"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}\
]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"Row", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Dynamic", "@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"pastebutton", "[", "cdchoice", "]"}], "[", 
              "pastedexpr", "]"}], ")"}]}], ",", "\"\<  \>\"", ",", 
           RowBox[{"Dynamic", "@", "\[IndentingNewLine]", 
            RowBox[{"Row", "[", "\[IndentingNewLine]", 
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"cdchoice", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"cdchoice", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdchoice", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"derivativesmenuselection", "[", "manifold", "]"}],
                    ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Derivative Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "\"\<\>\""}], ",",
                     "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "===", "\"\<\>\""}], " ",
                     "&&", " ", 
                    RowBox[{
                    RowBox[{"cdown", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"cup", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"cbasischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"CovDQ", "[", "cdchoice", "]"}], "||", 
                    RowBox[{"cdchoice", "===", "Bracket"}]}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "paramchoice", "]"}], ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{"$Parameters", ",", "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Parameter Menu\>\""}], "]"}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                   "\[IndentingNewLine]", "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"cdchoice", "===", "ParamD"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Tooltip", "[", 
                RowBox[{
                 RowBox[{"PopupMenu", "[", 
                  RowBox[{
                   RowBox[{"Dynamic", "[", 
                    RowBox[{"tensorhead", ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"tensorhead", "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"tensorhead", "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"cdchoice", "=", "\"\<\>\""}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                   ",", 
                   RowBox[{"tensormenuselection", "[", "manifold", "]"}], ",", 
                   RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                   RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                   RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}], ",", 
                   RowBox[{"FrameMargins", "\[Rule]", "Small"}]}], "]"}], 
                 ",", "\"\<Tensor Menu\>\""}], "]"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", 
                 RowBox[{
                  RowBox[{"Tooltip", "[", 
                   RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", "gdslots", "]"}], ",", 
                    RowBox[{"Range", "[", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Head", "@", 
                    RowBox[{"DimOfManifold", "[", "manifold", "]"}]}], "===", 
                    "Symbol"}], ",", "7", ",", 
                    RowBox[{"DimOfManifold", "[", "manifold", "]"}]}], "]"}], 
                    "]"}], ",", 
                    RowBox[{"Alignment", "\[Rule]", "Right"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Gdelta slot Menu\>\""}], "]"}], ",", 
                  "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", "1", ",", 
                    "0"}], "]"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}], 
               ",", "\[IndentingNewLine]", 
               RowBox[{"Sequence", "@@", "\[IndentingNewLine]", 
                RowBox[{"Table", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"With", "[", 
                   RowBox[{
                    RowBox[{"{", 
                    RowBox[{"kk", "=", "k"}], "}"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Switch", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", "Labels", ",", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"linput", "[", "kk", "]"}], "===", "Null"}], ",", 
                    
                    RowBox[{"Invisible", "@", "\"\<AA\>\""}], ",", 
                    RowBox[{"linput", "[", "kk", "]"}]}], "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Invisible", "[", "\"\<AA\>\"", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"Button", "[", 
                    RowBox[{"\"\<LI\>\"", ",", 
                    RowBox[{
                    RowBox[{"CreateDialog", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TextCell", "[", "\"\<Label: \>\"", "]"}], ",", 
                    RowBox[{"InputField", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"linput", "[", "kk", "]"}], "]"}], 
                    RowBox[{"(*", 
                    RowBox[{",", "String"}], "*)"}], ",", 
                    RowBox[{"ContinuousAction", "\[Rule]", "True"}]}], "]"}], 
                    ",", 
                    RowBox[{"ChoiceButtons", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"DialogReturn", "[", 
                    RowBox[{
                    RowBox[{"label", "[", "kk", "]"}], "=", 
                    RowBox[{"linput", "[", "kk", "]"}]}], "]"}], ",", 
                    RowBox[{"DialogReturn", "[", "]"}]}], "}"}], "]"}]}], 
                    "}"}], "]"}], ";"}], ",", 
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Label Index\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.74", "]"}]}]}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"-", "Labels"}], ",", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"Invisible", "[", "\"\<AA\>\"", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"linput", "[", "kk", "]"}], "===", "Null"}], ",", 
                    
                    RowBox[{"Invisible", "@", "\"\<AA\>\""}], ",", 
                    RowBox[{"linput", "[", "kk", "]"}]}], "]"}], "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"Button", "[", 
                    RowBox[{"\"\<LI\>\"", ",", 
                    RowBox[{
                    RowBox[{"CreateDialog", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"TextCell", "[", "\"\<Label: \>\"", "]"}], ",", 
                    RowBox[{"InputField", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"linput", "[", "kk", "]"}], "]"}], 
                    RowBox[{"(*", 
                    RowBox[{",", "String"}], "*)"}], ",", 
                    RowBox[{"ContinuousAction", "\[Rule]", "True"}]}], "]"}], 
                    ",", 
                    RowBox[{"ChoiceButtons", "[", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"DialogReturn", "[", 
                    RowBox[{
                    RowBox[{"label", "[", "kk", "]"}], "=", 
                    RowBox[{"linput", "[", "kk", "]"}]}], "]"}], ",", 
                    RowBox[{"DialogReturn", "[", "]"}]}], "}"}], "]"}]}], 
                    "}"}], "]"}], ";"}], ",", 
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"Automatic", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Label Index\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.74", "]"}]}]}], "]"}], ",", 
                    "\[IndentingNewLine]", "_", ",", 
                    RowBox[{"Column", "[", 
                    RowBox[{
                    RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=!=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<up-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{
                    RowBox[{"GdeltaSlots", "[", "gdslots", "]"}], 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "delta"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"tensorhead", "===", "Basis"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], ",", 
                    
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    "}"}], ",", "\[IndentingNewLine]", "True", ",", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}], 
                    "]"}], "[", 
                    RowBox[{"[", "kk", "]"}], "]"}], "===", 
                    RowBox[{"-", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}]}], "||", 
                    RowBox[{"MetricEndowedQ", "[", 
                    RowBox[{"TangentBundleOfManifold", "[", "manifold", "]"}],
                     "]"}]}], ",", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], ",", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=", "#"}], ";", 
                    RowBox[{"Which", "[", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "=!=", "\"\<\>\""}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", "\"\<\>\""}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "===", "\"\<\>\""}], " ", 
                    "&&", " ", 
                    RowBox[{
                    RowBox[{"down", "[", "kk", "]"}], "===", "\"\<\>\""}]}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"up", "[", "kk", "]"}], "=", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "//", "First"}]}]}], 
                    "\[IndentingNewLine]", "]"}]}], ")"}], "&"}]}], "]"}], 
                    ",", 
                    RowBox[{"Append", "[", 
                    RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{"IndicesOfVBundle", "@", 
                    RowBox[{
                    "TangentBundleOfManifold", "[", "manifold", "]"}]}], 
                    ")"}], "[", 
                    RowBox[{"[", "1", "]"}], "]"}], " ", "~", "Join", "~", 
                    RowBox[{"cnumbersof", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}]}], ",", 
                    "\"\<\>\""}], "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<down-index Menu\>\""}], "]"}], ",", 
                    RowBox[{"Invisible", "[", "\"\<XXX\>\"", "]"}]}], "]"}], 
                    ",", "\[IndentingNewLine]", 
                    RowBox[{"Tooltip", "[", 
                    RowBox[{
                    RowBox[{"PopupMenu", "[", 
                    RowBox[{
                    RowBox[{"Dynamic", "[", 
                    RowBox[{"basischoice", "[", "kk", "]"}], "]"}], ",", 
                    RowBox[{"Thread", "[", 
                    RowBox[{
                    RowBox[{"abstractandbases", "[", "manifold", "]"}], 
                    "\[Rule]", 
                    RowBox[{"abstractandbasesdisks", "[", "manifold", "]"}]}],
                     "]"}], ",", 
                    RowBox[{"Appearance", "\[Rule]", "\"\<Button\>\""}], ",", 
                    
                    RowBox[{"ImageSize", "\[Rule]", 
                    RowBox[{"{", 
                    RowBox[{"20", ",", "20"}], "}"}]}]}], "]"}], ",", 
                    "\"\<Basis Menu\>\""}], "]"}]}], "}"}], ",", 
                    RowBox[{"BaselinePosition", "\[Rule]", 
                    RowBox[{"Scaled", "[", "0.66", "]"}]}]}], "]"}]}], 
                    "]"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
                   "]"}], ",", "\[IndentingNewLine]", 
                  RowBox[{"{", 
                   RowBox[{"k", ",", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"xTensorQ", "[", "tensorhead", "]"}], ",", 
                    "\[IndentingNewLine]", 
                    RowBox[{"Which", "[", 
                    RowBox[{
                    RowBox[{"tensorhead", "===", "Gdelta"}], ",", 
                    RowBox[{"2", "gdslots"}], ",", "\[IndentingNewLine]", 
                    "True", ",", 
                    RowBox[{"Length", "@", 
                    RowBox[{"SlotsOfTensor", "[", "tensorhead", "]"}]}]}], 
                    "]"}], ",", "0"}], "]"}]}], "}"}]}], 
                 "\[IndentingNewLine]", "]"}]}], ",", 
               RowBox[{"Invisible", "[", "\"\<AAA\>\"", "]"}]}], 
              "\[IndentingNewLine]", "}"}], "]"}]}]}], "}"}], "]"}], "}"}], 
       ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "TensorManipulationsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GeneralSettingssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "GlobalEnvironmentsection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Definitionssection", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "BasesandChartssection", "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "Perturbationssection", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{"--", 
                    RowBox[{
                    "--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]\
}]}]}]}]}]}]}]}]}]}]}]}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"{", "ExteriorFormssection", "}"}]}], "\[IndentingNewLine]", 
      "}"}], ",", 
     RowBox[{"Alignment", "\[Rule]", "Left"}], ",", 
     RowBox[{"Dividers", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"False", ",", 
        RowBox[{"{", 
         RowBox[{"False", ",", "False", ",", "False", ",", 
          RowBox[{"{", "True", "}"}], ",", "False"}], "}"}]}], "}"}]}]}], 
    "]"}]}]}]], "Input",
 InitializationCell->True],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "This", " ", "is", " ", "the", " ", "palette", " ", "object", " ", "and", 
    " ", "the", " ", "initial", " ", "palette", " ", "creation"}], " ", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"DisplaySplash", "[", "3", "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"xPrintPalette", "=", "\[IndentingNewLine]", 
     RowBox[{"CreatePalette", "[", 
      RowBox[{"xPrintpaste", ",", "\[IndentingNewLine]", 
       RowBox[{"WindowTitle", "\[Rule]", "xPrintPaletteTitle"}], ",", 
       RowBox[{"Saveable", "->", "False"}]}], "]"}]}], ";"}]}]}]], "Input",
 InitializationCell->True],

Cell["Close the xPrintPalette when exiting the Mathematica session", "Text"],

Cell[BoxData[
 RowBox[{"$Epilog", ":=", 
  RowBox[{"NotebookClose", "[", "xPrintPalette", "]"}]}]], "Input",
 InitializationCell->True]
}, Closed]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["2. End package",
 FontColor->RGBColor[0, 0, 1]]], "Section",
 FontSize->24],

Cell[CellGroupData[{

Cell["10.1. EndPackage", "Subsection"],

Cell["End the private context of the package :", "Text"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"End", "[", "]"}]], "Input",
 InitializationCell->True],

Cell[BoxData["\<\"xAct`xPrint`Private`\"\>"], "Output"]
}, Open  ]],

Cell["End the package :", "Text"],

Cell[BoxData[
 RowBox[{"EndPackage", "[", "]"}]], "Input",
 InitializationCell->True]
}, Open  ]]
}, Closed]]
}, Open  ]]
},
AutoGeneratedPackage->Automatic,
ScreenStyleEnvironment->"Working",
WindowToolbars->"EditBar",
WindowSize->{783, 604},
WindowMargins->{{305, Automatic}, {Automatic, 311}},
Visible->True,
PrintingCopies->1,
PrintingPageRange->{Automatic, Automatic},
PrintingOptions->{"Magnification"->1,
"PaperOrientation"->"Portrait",
"PaperSize"->{597.562, 842.375},
"PostScriptOutputFile":>FrontEnd`FileName[{$RootDirectory, "home", "jmm"}, 
  "xTensor.nb.ps", CharacterEncoding -> "iso8859-1"],
"PrintCellBrackets"->False,
"PrintMultipleHorizontalPages"->False,
"PrintRegistrationMarks"->True,
"PrintingMargins"->{{54, 54}, {108, 108}}},
PrivateNotebookOptions->{"FileOutlineCache"->False},
ShowSelection->True,
TrackCellChangeTimes->False,
FrontEndVersion->"10.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (December 4, \
2014)",
StyleDefinitions->"Default.nb",
IndexCreationOptions -> {"Format" -> "PageReferences"}
]
